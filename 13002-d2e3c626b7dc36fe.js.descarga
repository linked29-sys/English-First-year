!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1d61e49a-8a4e-4aee-a255-627932faf580",e._sentryDebugIdIdentifier="sentry-dbid-1d61e49a-8a4e-4aee-a255-627932faf580")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13002],{4868:(e,t,a)=>{a.d(t,{a:()=>l});var s=a(82509),i=a(65258),n=a(17823);class r{constructor(e,t){this.set=e,this.get=t,this.financeItem="overview",this.stockFinancialItem="incomeStatements",this.stockTimeSpan="1D",this.stockFinancialTimeframe="quarterly",this.isChatOpen=!0,this.setFinanceItem=(0,i.kp)(this.set,"financeItem"),this.setStockFinancialItem=(0,i.kp)(this.set,"stockFinancialItem"),this.setStockTimeSpan=(0,i.kp)(this.set,"stockTimeSpan"),this.setStockFinancialTimeframe=(0,i.kp)(this.set,"stockFinancialTimeframe"),this.setIsChatOpen=(0,i.kp)(this.set,"isChatOpen")}}let l=(0,s.v)()((0,n.lt)((0,n.eh)((0,n.Zr)((e,t)=>new r(e,t),{name:"finance-preferences",partialize:e=>({stockFinancialItem:e.stockFinancialItem,financeItem:e.financeItem}),version:2})),{name:"useFinancePageStore"}))},13002:(e,t,a)=>{a.d(t,{A:()=>t_});var s=a(79342),i=a(13010),n=a(44428),r=a(82591),l=a(10953),o=a(38614),c=a(15041),d=a(39489),u=a(52244),p=a(11750),m=a(56691),g=a(30693),x=a(4295),h=a(12220),f=a(17703),v=a(84969),y=a(33846),b=a(88382),j=a(65146),w=a(43086);let I=e=>{let{hasImage:t,prompt:a,onParentPeek:i,focusedImageUrl:n,parentImageUrl:r,isStreaming:l,onRegenerate:c,onClose:d}=e,{t:I}=(0,j.Bd)("base"),[k,N]=(0,b.useState)(!1),[S,C]=(0,b.useState)(void 0),[E,P]=(0,b.useState)(!1),_=(0,x.c)(),A=(0,o.aP)(e=>e.conversationId),M=(0,o.aP)(e=>e.lastMessageId),{editImagePresets:T}=(0,g.F)(),z=(0,b.useMemo)(()=>{if(!S)return;let e=T.flatMap(e=>e.presets).find(e=>e.prompt===S);return e?(0,s.jsxs)(s.Fragment,{children:[e.icon&&b.createElement(e.icon,{size:20,className:"text-secondary flex-shrink-0"}),(0,s.jsx)("h1",{className:"text-lg font-semibold truncate",children:e.label})]}):(0,s.jsx)("h1",{className:"text-lg font-semibold truncate",children:S})},[S,T]),R=(0,b.useCallback)(()=>{!E&&n&&(P(!0),(0,h.G)(n,null==n?void 0:n.split("/").pop()).catch((0,f.HX)("image-editor:handleDownload")).finally(()=>P(!1)))},[n,E]);return(0,b.useEffect)(()=>{a&&S!==a&&C(a)},[a,S]),(0,b.useEffect)(()=>{r&&!k&&N(!0)},[r,k]),(0,s.jsx)("header",{className:"flex justify-between w-full items-center min-h-10 gap-3  relative z-30 flex-shrink-0",children:(0,s.jsxs)(v.N,{mode:"popLayout",children:[S&&(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"flex items-center gap-2 w-full overflow-hidden min-w-0",children:z},S),(0,s.jsxs)("div",{className:"flex gap-2 ms-auto shrink-0",children:[(0,s.jsxs)(s.Fragment,{children:[k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,s.jsx)(m.gx,{size:"iconMd",variant:"ghost",rounded:!0,"aria-label":I("Compare","Compare"),tooltipContent:I("Compare","Compare"),tooltipContentProps:{side:"bottom"},onMouseDown:()=>i(!0),onMouseUp:()=>i(!1),onMouseLeave:()=>i(!1),onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),i(!0)},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),i(!1)},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},onContextMenuCapture:e=>{e.preventDefault(),e.stopPropagation()},asChild:!0,disabled:l||!r,children:(0,s.jsx)(y.P.button,{whileTap:!l&&r?{scale:.9}:void 0,children:(0,s.jsx)(p.Uye,{className:"size-5"})})})},"compare"),(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,s.jsx)(m.gx,{size:"iconMd",variant:"ghost",rounded:!0,"aria-label":I("Regenerate","Regenerate"),tooltipContent:I("Regenerate","Regenerate"),tooltipContentProps:{side:"bottom"},asChild:!0,disabled:l||!r,onClick:c,children:(0,s.jsx)(y.P.button,{whileTap:!l&&r?{scale:.9}:void 0,children:(0,s.jsx)(p.V$7,{className:"size-5"})})})},"regenerate")]}),t&&(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,s.jsx)(m.gx,{variant:"ghost",size:"iconMd",rounded:!0,"aria-label":I("Download Image","Download Image"),tooltipContent:I("Download Image","Download Image"),tooltipContentProps:{side:"bottom"},disabled:l||!n||E,onClick:R,children:E?(0,s.jsx)(w.y,{size:"xs"}):(0,s.jsx)(p.s3U,{className:"size-5"})})},"download"),A&&M&&(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,s.jsx)(u.w,{variant:"ghost",size:"iconMd",rounded:!0,conversationId:A,responseId:M,iconProps:{size:20}})},"share")]}),_?(0,s.jsx)(m.$n,{"aria-label":I("Close Image Editor","Close Image Editor"),variant:"filled",size:"iconMd",rounded:!0,onClick:d,children:(0,s.jsx)(p.uv5,{size:20})}):(0,s.jsx)(m.gx,{"aria-label":I("Close Image Editor","Close Image Editor"),tooltipContent:I("Close Image Editor","Close Image Editor"),tooltipContentProps:{side:"bottom"},variant:"filled",size:"md",rounded:!0,onClick:d,children:I("Close","Close")})]})]})})};var k=a(28951),N=a(61312);let S=e=>{let{images:t,focusedOption:a,isStreaming:i,onSelect:n}=e;return(0,s.jsx)(y.P.aside,{className:"lg:fixed top-0 inset-0 lg:top-0 lg:right-0 lg:left-auto flex lg:flex-col items-center justify-center lg:h-full gap-4 pb-3 lg:p-6 pointer-events-none z-30",variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",children:(0,s.jsx)(v.N,{mode:"popLayout",children:t.map((e,t)=>(0,s.jsx)(y.P.button,{className:(0,N.cn)("size-16 sm:size-20 relative rounded-xl border bg-background p-1 pointer-events-auto",{"ring-primary ring-2":t===a}),onClick:()=>n(t),whileTap:t!==a?{scale:.95}:{},variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",children:(0,s.jsx)("div",{className:"relative h-full w-full overflow-hidden rounded-lg",children:(0,s.jsx)("figure",{className:"absolute -translate-x-1/2 left-1/2 h-full aspect-[4/3]",children:(0,s.jsx)(k.L,{isModerated:e.isModerated,status:i?"streaming":"finished",iconSize:24,intermediateResults:i?e.progressMap:[{progress:1,imageUrl:e.url}]})})})},e.id))})},"image-editor-option-nav")};var C=a(40016),E=a(67153),P=a(75500),_=a(66408),A=a(69643),M=a(23232),T=a(4878),z=a(70888),R=a(59075),D=a(1189),U=a(44347),O=a(74995),L=a(14908);let K=e=>{let{isEditingCurrentImage:t,setIsPeekingParent:a,isPeekingParent:i,focusedImage:n,parentImageUrl:r,generatedImageHeight:l,generatedImageWidth:o,isFinalImageLoaded:c,setIsFinalImageLoaded:d,isParentImageLoaded:u,setIsParentImageLoaded:p}=e,[m,g]=(0,b.useState)([]),[x,h]=(0,b.useState)(!1),[f,j]=(0,b.useState)(!1),[w,I]=(0,b.useState)(!0),S=(0,b.useMemo)(()=>!!(l&&o),[l,o]),C=(0,b.useMemo)(()=>l&&o?o/l:4/3,[l,o]);return(0,b.useEffect)(()=>{(t||!w)&&(null==n?void 0:n.progressMap)?g(n.progressMap):!t&&(null==n?void 0:n.url)?g(e=>[...e,{progress:1,imageUrl:n.url||""}]):g([])},[t,null==n?void 0:n.url,null==n?void 0:n.progressMap,w]),(0,b.useEffect)(()=>{if(!x)return void a(!1);let e=setTimeout(()=>{x&&!f&&a(!0)},100);return()=>clearTimeout(e)},[x,f,a]),(0,b.useEffect)(()=>{t&&w&&I(!1),t||!c||w||I(!0)},[t,c,w]),(0,s.jsx)("figure",{className:(0,N.cn)("relative group/image w-full max-w-5xl 2xl:max-w-6xl overflow-hidden rounded-lg select-none",!t&&r&&(i?"cursor-grabbing":"cursor-grab")),onDragStart:e=>{if(i)return void e.preventDefault();j(!0)},onDragEnd:()=>{j(!1),h(!1)},onMouseDown:e=>{0===e.button&&h(!0)},onMouseUp:()=>h(!1),onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),h(!0)},onTouchEnd:e=>{e.preventDefault(),h(!1)},onMouseLeave:()=>{h(!1),j(!1)},children:(0,s.jsx)(v.N,{mode:"wait",children:t||!w?S?(0,s.jsx)(y.P.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:1,filter:"blur(0px)",transition:{delay:1.5}},transition:{ease:"easeInOut"},className:"h-full mx-auto",style:{aspectRatio:C,maxHeight:l},children:(0,s.jsx)(k.L,{status:"streaming",intermediateResults:m,isModerated:null==n?void 0:n.isModerated,aspectRatio:C})},"streaming-image"):(0,s.jsx)(B,{}):(0,s.jsxs)("div",{className:"flex relative items-center justify-center w-full h-full",children:[(null==n?void 0:n.url)&&(0,s.jsxs)(s.Fragment,{children:[!c&&(0,s.jsx)(B,{className:"absolute z-20 inset-0"}),(0,s.jsx)(y.P.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},exit:"hidden",animate:r&&i||!c?"hidden":"visible",transition:{ease:"easeInOut"},src:n.url,alt:"active-image",className:"max-h-full aspect-auto rounded-lg",onLoad:()=>d(!0)},"finished-image")]}),(0,s.jsx)(v.N,{children:!t&&r&&i&&(0,s.jsxs)(y.P.div,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},initial:"hidden",exit:"hidden",animate:"visible",transition:{ease:"easeInOut"},className:"absolute z-10 w-full h-full flex items-center overflow-hidden",children:[!u&&(0,s.jsx)(B,{className:"absolute z-20 inset-0"}),(0,s.jsx)(y.P.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},animate:u?"visible":"hidden",src:r,alt:"parent-image",className:"max-h-full aspect-auto mx-auto rounded-lg",onLoad:()=>p(!0)},"parent-image")]},"parent-image-container")})]})})})},B=e=>{let{className:t}=e;return(0,s.jsx)(y.P.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{ease:"easeInOut"},className:(0,N.cn)("h-full w-full flex items-center justify-center animate-pulse-lg",t),children:(0,s.jsx)(p.xfq,{size:60,strokeWidth:1.3,className:"opacity-30 rotate-[-10deg]"})},"loader")};var F=a(41320),q=a(4423),G=a(43035),W=a(93220),H=a(34500),V=a(73772);let $=e=>{let{hasImage:t,onSend:a,isStreaming:i}=e,{editImagePresets:n}=(0,g.F)(),r=(0,F.Di)(),[l,o]=(0,b.useState)(null),[c,d]=(0,b.useState)(null),u=(0,b.useMemo)(()=>i||!t,[i,t]),p=(0,b.useCallback)(e=>{o(t=>t===e?null:e)},[o]),x=(0,b.useCallback)(e=>{if(!i)return o(null),a(e.prompt,e.presetId)},[i,a]),h=(0,b.useCallback)(e=>{let t=document.querySelector('[data-preset-id="'.concat(e,'"]'));if(!t)return{};let a=t.getBoundingClientRect();return a.right+12+200>window.innerWidth?{left:a.left-200-12,top:a.top+(a.height-150)/2}:{left:a.right+12,top:a.top+(a.height-150)/2}},[]);return(0,b.useEffect)(()=>{if(!l||r)return void d(null);let e=()=>{let e=document.body.querySelector("[data-highlighted][data-preset-id]"),t=(null==e?void 0:e.getAttribute("data-preset-id"))||null;t&&d(t)};e();let t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["data-highlighted"],subtree:!0}),()=>{t.disconnect()}},[l,r]),(0,s.jsx)("div",{className:"@container flex w-full xs:justify-center justify-start items-center overflow-x-auto xs:overflow-visible gap-2 xs:gap-3 relative z-30 no-scrollbar",children:n.map((e,t)=>(0,s.jsx)(y.P.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},initial:"hidden",animate:"visible",transition:{duration:.15,ease:"easeInOut",delay:.06*t},className:"bg-surface-base rounded-full",children:r?(0,s.jsxs)(H._s,{open:e.category===l,onOpenChange:t=>{t?o(e.category):o(null)},children:[(0,s.jsx)(H.Uz,{disabled:u,asChild:!0,children:(0,s.jsx)(Q,{category:e,disabled:u})}),(0,s.jsxs)(H.zj,{className:"max-h-[90dvh]",children:[(0,s.jsx)(H.BE,{children:(0,s.jsxs)(H.gk,{className:"flex items-center justify-center gap-2",children:[e.icon&&b.createElement(e.icon,{size:20,className:"text-secondary flex-shrink-0"}),e.label]})}),(0,s.jsx)("div",{className:"p-2 space-y-2 overflow-auto",children:e.presets.map(e=>(0,s.jsxs)(m.$n,{variant:"ghost",size:"lg",className:"w-full flex items-center justify-start gap-3 h-auto py-3",onClick:()=>x(e),children:[e.icon&&b.createElement(e.icon,{size:18,className:"text-secondary flex-shrink-0"}),(0,s.jsx)("span",{children:e.label})]},e.presetId))})]})]}):(0,s.jsxs)(V.rI,{open:e.category===l,onOpenChange:()=>p(e.category),children:[(0,s.jsx)(V.ty,{disabled:u,asChild:!0,children:(0,s.jsx)(Q,{category:e,disabled:u})}),(0,s.jsx)(V.SQ,{hideWhenDetached:!0,side:"top",sideOffset:8,className:"min-w-60 space-y-0.5 z-[100000]",onMouseLeave:()=>{d(null)},onWheel:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:e.presets.map(t=>(0,s.jsxs)(V._2,{"data-preset-id":t.presetId,className:"flex items-center gap-2",onSelect:()=>x(t),children:[t.icon&&b.createElement(t.icon,{size:16,className:"text-secondary flex-shrink-0"}),t.label,c===t.presetId&&(0,G.createPortal)((0,s.jsxs)(y.P.div,{layoutId:"preset-preview",className:"fixed w-[200px] h-[150px] bg-surface-l4 border border-border-l1 rounded-2xl shadow-lg z-50 pointer-events-none flex items-center justify-center p-1.5",style:h(t.presetId),children:[(0,s.jsx)(W.$,{className:"absolute inset-0"}),t.previewUrl&&(0,s.jsx)(q.default,{src:t.previewUrl,alt:t.presetId,width:200,height:150,priority:!r&&l===e.category,className:"w-full h-full object-cover rounded-xl relative z-10"})]}),document.body)]},t.presetId))})]})},e.category))})},Q=b.forwardRef((e,t)=>{let{category:a,disabled:i,...n}=e;return(0,s.jsxs)(m.$n,{ref:t,size:"md",variant:"filledSecondary",rounded:!0,className:(0,N.cn)(!i&&"*:hover:text-primary transition-all"),disabled:i,...n,children:[a.icon&&b.createElement(a.icon,{size:16,className:"flex-shrink-0 text-secondary transition-colors"}),(0,s.jsx)("span",{children:a.label})]})});var X=a(24734);let Y=e=>{let{onUploadImage:t}=e,{t:a}=(0,j.Bd)("base"),i=(0,z.x)(O.A("fetchUploadFile")),n=(0,z.x)(O.A("removeByConversationId")),r=(0,o.aP)(O.A("conversationId")),{ASSET_SERVER_URL:l}=(0,d.v)(),c=(0,X.K)(),u=(0,b.useRef)(null),[g,x]=(0,b.useState)(!1),[h,f]=(0,b.useState)(!1),I=(0,b.useCallback)(()=>{var e;null==(e=u.current)||e.click()},[]),k=(0,b.useCallback)(async e=>{let s;if(1!==e.length||!e[0])return void L.oR.error(a("Only a single image file is allowed","Only a single image file is allowed"));if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e[0].type))return void L.oR.error(a("Only image files are allowed","Only image files are allowed"));f(!0);try{let t=i(e[0],r||"no_conversation_id");s=await t.metadataPromise}catch(e){c("image-editor-upload:uploadFile",e)}s instanceof Error&&c("image-editor-upload:uploadFile",s,a("Failed to upload file","Failed to upload file")),f(!1),n(r||"no_conversation_id"),!s||s instanceof Error||t({url:(0,T.sU)(l,s.fileUri),metadata:s})},[a,i,r,t,l,n,c]),N=(0,b.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h||x(!0)},[h]),S=(0,b.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),x(!1)},[]),C=(0,b.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),x(!1),!h)return k(Array.from(e.dataTransfer.files))},[k,h]),E=(0,b.useCallback)(e=>{if(e.target.files)return k(Array.from(e.target.files)).finally(()=>{u.current&&(u.current.value="")})},[k]);return(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},onDragOver:N,onDragLeave:S,onDrop:C,className:"border resize transition-colors w-full max-w-7xl h-full flex justify-center items-center border-border-l1 rounded-2xl p-8 mb-3 text-center ".concat(g&&!h&&"bg-surface-l1 border-border-l1"),children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"p-4 rounded-full text-fg-secondary transition-colors bg-surface-l1",children:(0,s.jsx)(v.N,{mode:"popLayout",children:g&&!h?(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsx)(p.sv7,{className:"size-6"})},"files"):(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsx)(p.XGR,{className:"size-6"})},"image-plus")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-primary",children:a("Upload an image to begin","Upload an image to begin")}),(0,s.jsx)(v.N,{mode:"popLayout",children:h?(0,s.jsx)(y.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:a("Uploading image","Uploading image")},"uploading"):g?(0,s.jsx)(y.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:a("Drop image here","Drop image here")},"dragging"):(0,s.jsx)(y.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:a("Drag and drop to upload","Drag and drop to upload")},"not-dragging")})]}),(0,s.jsx)("div",{className:"flex gap-3",children:(0,s.jsxs)(m.$n,{variant:"outline",className:"text-fg-primary hover:bg-button-ghost-hover rounded-2xl transition-all py-2.5 px-4 h-auto *:hover:text-fg-primary *:hover:transition-colors",disabled:h,autoFocus:!0,onClick:I,children:[h?(0,s.jsx)(w.y,{size:"xxs"}):(0,s.jsx)(p._OO,{className:"size-4 text-fg-secondary"}),a("Upload","Upload")]})}),(0,s.jsx)("input",{ref:u,className:"hidden",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:E,multiple:!1,"data-testid":"file-input"})]})})},J=()=>{let{ASSET_SERVER_URL:e}=(0,d.v)(),t=(0,P.h)(),a=(0,M._)(),{t:i}=(0,j.Bd)("base"),n=(0,E.L)(),{handleSendStart:r,timeToSendStart:l,consumeTimeToSendMs:u}=(0,_.Q)(),[p,m]=(0,A.M)("image-editor-first-open",!0),g=(0,R.j)(O.A("isOpen")),x=(0,R.j)(O.A("currentImage")),h=(0,R.j)(O.A("setImage")),y=(0,o.aP)(O.A("conversationId")),w=(0,o.aP)(O.A("streamedMessageId")),k=(0,o.aP)(O.A("lastMessageId")),N=(0,D.A3)(e=>e.byId[null!=w?w:""]),B=(0,D.A3)(O.A("byId")),F=(0,b.useMemo)(()=>{var e;return null!=(e=D.A3.getState().byConversationId[null!=y?y:""])?e:[]},[y]),[q,G]=(0,b.useState)(""),[W,H]=(0,b.useState)(!1),[V,Q]=(0,b.useState)(null),[X,J]=(0,b.useState)(!1),[Z,ee]=(0,b.useState)(!1),[et,ea]=(0,b.useState)(!1),[es,ei]=(0,b.useState)(!1),[en,er]=(0,b.useState)(!1),el=(0,b.useMemo)(()=>!!x,[x]),eo=(0,b.useMemo)(()=>!!(x&&"key"in x),[x]),ec=(0,b.useMemo)(()=>!!(x&&"metadata"in x),[x]),ed=(0,b.useMemo)(()=>{if(eo){if(W)return!V&&N&&Q(N.responseId),N||B[null!=V?V:""];let e=F.filter(e=>e.streamingImageById).find(e=>{for(let t in e.streamingImageById){let a=e.streamingImageById[t][100];if((null==a?void 0:a.imageUrl)===(null==x?void 0:x.url))return!0}});return e||(null==F?void 0:F.find(e=>{var t,a;return null==(t=e.generatedImageUrls)?void 0:t.includes(null!=(a=x.assetKey)?a:"")}))}},[x,F,eo,W,N,V,B]),eu=(0,b.useMemo)(()=>(null==ed?void 0:ed.parentResponseId)?B[ed.parentResponseId]:void 0,[ed,B]),ep=(0,b.useMemo)(()=>eu?(0,T.sU)(e,eu.imageEditUri):void 0,[eu,e]),em=(0,b.useMemo)(()=>{if(ec){var t,a;return[{id:null!=(t=x.metadata.fileUri)?t:"",url:null!=(a=(0,T.sU)(e,x.metadata.fileUri))?a:"",isModerated:!1,progressMap:void 0}]}return eo?ed?W&&ed.streamingImageById?Object.entries(ed.streamingImageById).map(t=>{var a;let[s,i]=t,n=Object.keys(i).map(Number),r=i[Math.max(...n)];return{id:s,url:null!=(a=(0,T.sU)(e,null==r?void 0:r.imageUrl))?a:"",isModerated:!1,progressMap:n.map(t=>{var a,s;return{progress:t/100,imageUrl:null!=(s=(0,T.sU)(e,null==(a=i[t])?void 0:a.imageUrl))?s:""}})}}):ed.generatedImageUrls.map(t=>{var a,s,i;let n=null!=(s=Object.values(null!=(a=ed.streamingImageById)?a:{})[0])?s:{},r=Object.keys(n).map(Number);return{id:t,url:null!=(i=(0,T.sU)(e,t))?i:"",isModerated:!1,progressMap:r.length>0?r.map(t=>{var a,s;return{progress:t/100,imageUrl:null!=(s=(0,T.sU)(e,null==(a=n[t])?void 0:a.imageUrl))?s:""}}):void 0}}):[]:[]},[x,ed,eo,W,e,ec]),eg=(0,b.useMemo)(()=>em.length>1?em.find(e=>e.id===(null==x?void 0:x.key)||e.id===(null==x?void 0:x.assetKey)):em[0],[em,x]),ex=(0,b.useMemo)(()=>(0,s.jsx)(K,{isEditingCurrentImage:W,focusedImage:eg,parentImageUrl:es?void 0:ep,isPeekingParent:X,setIsPeekingParent:J,generatedImageWidth:null==ed?void 0:ed.generatedImageWidth,generatedImageHeight:null==ed?void 0:ed.generatedImageHeight,isParentImageLoaded:et,isFinalImageLoaded:en,setIsFinalImageLoaded:er,setIsParentImageLoaded:ea}),[W,eg,X,ep,null==ed?void 0:ed.generatedImageWidth,null==ed?void 0:ed.generatedImageHeight,et,en,es]),eh=(0,b.useCallback)(e=>{e&&h(e)},[h]),ef=(0,b.useCallback)(e=>{let t=em[e];t&&(W&&h({key:t.id}),h({key:t.id,assetKey:t.id,url:t.url,isModerated:t.isModerated,progress:(null==t?void 0:t.progressMap)?Math.max(...Object.keys(t.progressMap).map(Number)):1}))},[em,W,h]),ev=(0,b.useCallback)(async e=>(ee(!0),e().finally(()=>{ee(!1)})),[]),ey=(0,c.m)("image-workbench:handleAbort",ev),eb=(0,b.useCallback)(async(e,a)=>{if(!e.trim()||!(null==x?void 0:x.url))throw Error("No message or image");let s=o.aP.getState(),i=U.C$.getState(),r=D.A3.getState(),l=z.x.getState(),c=a.replace(/^https?:\/\/[^/]+\/?/,"");G(""),l.removeByConversationId(s.conversationId||"no_conversation_id"),l.removeAttachByConversationId(s.conversationId||"no_conversation_id"),await n();let d=s.lastMessageId?r.byId[s.lastMessageId]:void 0;if(s.lastMessageId&&!d)throw Error("Last message is missing");if((null==d?void 0:d.sender)==="human")throw Error("Last message is human");"none"!==s.reasoningMode&&s.setReasoningMode("none");let u={message:e,toolOverrides:{imageGen:!0},imageEditUri:c,enableRetries:t.ENABLE_AUTO_STREAM_RETRY},p=ec&&x.metadata.fileMetadataId&&!(null==eu?void 0:eu.message)?[x.metadata.fileMetadataId]:[];if(ec)return s.conversationId?s.sendResponse({...u,parentResponseId:s.lastMessageId,conversationId:s.conversationId,fileAttachmentIds:p,webpageUrls:[],setOpimisticUserResponse:!0,setUserResponse:!0,ff:t}):s.establishNewConversation({...u,fileAttachmentIds:[x.metadata.fileMetadataId],temporary:i.isIncognito,ff:t});if(!s.conversationId)throw Error("No conversation id");return s.sendResponse({...u,parentResponseId:s.lastMessageId,conversationId:s.conversationId,fileAttachmentIds:p,webpageUrls:[],setOpimisticUserResponse:!0,setUserResponse:!0,ff:t})},[x,n,ec,eu,t]),ej=(0,b.useCallback)(async(e,t)=>{let a=o.aP.getState(),s=D.A3.getState(),i=a.streamedMessageId?s.byId[a.streamedMessageId]:void 0;return["streaming","optimistic","reconnecting"].includes((null==i?void 0:i.state)||"closed")&&await ey(),H(!0),eb(e,t).catch(()=>{R.j.getState().close()})},[eb,ey]),ew=(0,b.useCallback)(async(e,t)=>{if(e.trim()&&(null==eg?void 0:eg.url))return a("edit_image_start",(0,_.r)(eg.url),{queryType:t?"preset":"manual",location:"image-editor",presetId:t||"",message:e,messageLength:String(e.length),timeToSendMs:String(u())}),ej(e,eg.url).catch(e=>{(0,f.vV)("image-viewer:ImageEditor:handleEditCurrentImage",e)})},[ej,eg,a,u]),eI=(0,b.useCallback)(()=>{if((null==eu?void 0:eu.message)&&ep)return a("edit_image_start",(0,_.r)(ep),{queryType:"regenerate",location:"image-editor",presetId:"",message:null==eu?void 0:eu.message,messageLength:String(null==eu?void 0:eu.message),timeToSendMs:String(u())}),ej(eu.message,ep).catch(e=>{(0,f.vV)("image-viewer:ImageEditor:handleRegenerate",e)})},[eu,ep,ej,a,u]);(0,b.useEffect)(()=>{W&&em.length&&em[0]&&!em.find(e=>e.id===x.key)&&h({key:em[0].id})},[em,W,x,h]),(0,b.useEffect)(()=>{let t=R.j.getState();if(W&&N&&"error"===N.state)return t.close();if(W&&V&&N&&"closed"===N.state){var s,i,n,r;if(H(!1),Q(null),!k)return t.close();let l=B[k];if(!l)return t.close();let o=null==(n=l.streamingImageById)||null==(i=n[null!=(r=null==x?void 0:x.key)?r:""])||null==(s=i[100])?void 0:s.imageUrl;if(!o)return t.close();a("edit_image_end",(0,_.r)((null==eu?void 0:eu.imageEditUri)||""),{location:"image-editor"}),h({key:o,assetKey:o,url:(0,T.sU)(e,o),progress:100,isModerated:!1})}},[eu,N,W,V,k,B,e,a,h]),(0,b.useEffect)(()=>{W||Z||void 0!==l||r()},[u,r,W,Z,l]),(0,b.useEffect)(()=>{if(null==eg?void 0:eg.url){er(!1);let e=new Image;e.onload=()=>er(!0),e.src=eg.url}},[null==eg?void 0:eg.url]),(0,b.useEffect)(()=>{if(ep){ea(!1),ei(!1);let e=new Image;e.onload=()=>ea(!0),e.onerror=()=>ei(!0),e.src=ep}},[ep]),(0,b.useEffect)(()=>{p&&g&&(m(!1),L.oR.message((0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-fg-primary font-bold",children:i("image-editor-welcome.title","Welcome to Image Editor")}),(0,s.jsx)("p",{className:"text-fg-secondary",children:i("image-editor-welcome.description","A focused space for you to transform images with Grok to anything you can imagine.")})]}),{duration:7e3}))},[p,g,m,i]);let ek=(0,R.j)(O.A("close"));return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-between gap-6 sm:gap-20 w-full h-full",children:[(0,s.jsx)(I,{hasImage:el,prompt:ep?null==eu?void 0:eu.message:void 0,focusedImageUrl:null==eg?void 0:eg.url,parentImageUrl:es?void 0:ep,isStreaming:W||Z,onParentPeek:e=>J(e),onClose:ek,onRegenerate:eI}),el?ex:g&&(0,s.jsx)(Y,{onUploadImage:eh}),(0,s.jsx)("footer",{className:"relative w-full max-w-2xl h-16 flex-shrink-0 mt-12 sm:mt-0",children:(0,s.jsxs)("div",{className:"absolute bottom-0 inset-x-0 flex flex-col gap-4",children:[(0,s.jsx)(v.N,{mode:"popLayout",children:el&&em&&em.length>1&&(0,s.jsx)(S,{isStreaming:W||Z,images:em,focusedOption:em.findIndex(e=>e.id===(null==eg?void 0:eg.id))||0,onSelect:ef})}),(0,s.jsx)($,{hasImage:el,isStreaming:W||Z,onSend:ew}),(0,s.jsx)(C.q,{hasImage:el,inputValue:q,isStreaming:W||Z,onInputValueChange:G,onSend:ew,onAbort:ey})]})})]})};var Z=a(13103),ee=a(53592),et=a(84852);let ea=()=>{let{t:e}=(0,j.Bd)("base"),t=(0,M._)(),a=(0,R.j)(O.A("isOpen")),i=(0,R.j)(O.A("close")),n=(0,o.aP)(O.A("conversationId")),[r,l]=(0,b.useState)(void 0),{handleEditorOpen:c,consumeEditorTimeMs:d,editorOpenTime:u}=(0,_.Q)();return(0,b.useEffect)(()=>{a&&void 0===u?c():a||void 0===u||t("image_editor_close",void 0,{timeInEditorMs:String(d()),location:"image-editor-dialog"})},[a,c,d,t,u]),(0,b.useEffect)(()=>{n!==r&&(r&&i(),l(n))},[n,i,r]),(0,s.jsx)(ee.lG,{open:a,onOpenChange:e=>{e||i()},children:(0,s.jsxs)(Z.ZJ,{children:[(0,s.jsx)(ee.LC,{className:"fixed inset-0 z-50 bg-overlay duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),(0,s.jsxs)(ee.Cf,{"aria-describedby":e("image-editor.title","Image editor"),className:(0,N.cn)("fixed z-50 inset-0 bg-background duration-200 focus:outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 p-2 lg:p-6"),onCloseAutoFocus:e=>{e.preventDefault(),document.body.style.pointerEvents=""},children:[(0,s.jsx)(et.s,{children:(0,s.jsx)(Z.L3,{children:e("image-editor.title","Image editor")})}),(0,s.jsx)(J,{})]})]})})};var es=a(57614),ei=a(49972),en=a(41739),er=a(68332);let el=e=>{let t=(0,b.useRef)(null);return(0,b.useEffect)(()=>{let a=a=>{t.current&&!t.current.contains(a.target)&&e()};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[e]),t};var eo=a(86035),ec=a(86067),ed=a(62903),eu=a(38541),ep=a.n(eu),em=a(2376),eg=a(35181),ex=a(18585),eh=a(80226);let ef=(0,b.forwardRef)((e,t)=>{let{onSelect:a,tab:i,onRemove:n,isEditing:r,newTitle:l,onNewTitleChange:o,onEditStart:c,onEditSave:d,onEditCancel:u,isActive:g=!1,isDragging:x=!1,isStreaming:h=!1,isLoading:f=!1,isReconnecting:v=!1,showActions:y,className:w,...I}=e,{t:k}=(0,j.Bd)("base"),S=(0,ei.w1)(O.A("fetchGetConversation")),C=(0,eg.v)(S(i.conversationId));(0,b.useEffect)(()=>{if(C.data&&(C.data.temporary!==i.isTemporary||C.data.title!==i.title)){let{upsertConversationAsTab:e}=en.a.getState();e(C.data,i.conversationId)}},[C.data,i]);let E=(0,b.useCallback)(e=>{("keydown"!==e.type||"Enter"===e.key)&&(x||(e.preventDefault(),a(i.conversationId)))},[i.conversationId,a,x]),P=(0,b.useCallback)(e=>{e.stopPropagation(),n(i.conversationId)},[i.conversationId,n]),_=(0,b.useCallback)(e=>{e.stopPropagation(),("click"===e.type||e instanceof KeyboardEvent&&"Enter"===e.key)&&c(i.conversationId)},[c,i.conversationId]),A=(0,b.useCallback)(e=>{e.stopPropagation(),("click"===e.type||e instanceof KeyboardEvent&&"Enter"===e.key)&&d(i.conversationId)},[d,i.conversationId]),M=(0,b.useCallback)(e=>{o(e.target.value)},[o]),T=(0,b.useCallback)(e=>{e.stopPropagation(),"Enter"===e.key?d(i.conversationId):"Escape"===e.key&&u()},[u,d,i.conversationId]),z=(0,b.useMemo)(()=>{var e;if(i.isTemporary)return k("Temporary Chat","Temporary Chat");if(i.title)return i.title;if(null==(e=C.data)?void 0:e.createTime){let e=new Date(C.data.createTime);return"".concat(k("Chat on","Chat on")," ").concat(e.toLocaleDateString())}return k("Untitled Chat","Untitled Chat")},[k,i,C.data]);return f?(0,s.jsx)(eh.E,{className:"w-full h-10 my-1 rounded-2xl"}):(0,s.jsxs)("div",{...I,ref:t,className:(0,N.cn)("group pl-3 pr-1 py-1 text-sm hover:bg-button-ghost-hover w-full h-10 flex items-center rounded-2xl border gap-1.5","focus:outline-none focus-visible:ring-1 ring-ring ring-inset",g?"bg-button-ghost-hover text-fg-primary border-border-l1":"text-fg-secondary border-transparent",w),onClick:E,onKeyDown:E,tabIndex:0,role:"button",children:[r?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:l,onKeyDown:T,onChange:M,autoFocus:!0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ev,{isStreaming:h,isReconnecting:v,conversation:C.data}),(0,s.jsx)("span",{className:(0,N.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block",!i.isPreserved&&"italic"),style:{maskImage:"linear-gradient(to right, black 85%, transparent 100%)",WebkitMaskImage:"linear-gradient(to right, black 85%, transparent 100%)"},children:z})]}),r?(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(m.gx,{variant:"ghost",size:"iconSm",rounded:!0,onClick:e=>{e.stopPropagation(),u()},tooltipContent:k("Cancel","Cancel"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(p.uv5,{size:16,className:"text-fg-primary"})}),(0,s.jsx)(m.gx,{variant:"ghost",size:"iconSm",rounded:!0,onClick:A,tooltipContent:k("Save","Save"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(p.Srz,{size:16,className:"text-fg-primary"})})]}):(0,s.jsxs)("div",{className:"flex items-center justify-end",children:[!i.isTemporary&&!x&&(0,s.jsx)(m.gx,{tabIndex:-1,className:(0,N.cn)("hidden group-hover:flex group-focus-visible:flex text-fg-secondary",y&&"flex"),onClick:_,variant:"ghost",size:"iconSm",rounded:!0,tooltipContent:k("Rename","Rename"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(p.rZj,{})}),!x&&(0,s.jsx)(m.gx,{className:(0,N.cn)("hidden group-hover:flex group-focus-visible:flex text-fg-secondary",y&&"flex"),onClick:P,variant:"ghost",size:"iconSm",rounded:!0,tooltipContent:k("Close","Close"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(p.uv5,{})})]})]})}),ev=e=>{let{conversation:t}=e,{personaById:a}=(0,em.v5)(),i=(0,b.useMemo)(()=>{if(!(null==t?void 0:t.personaId)||!(0,em.sS)(t.personaId))return;let e=a[t.personaId];if(e)return{...e,...(0,ex.e8)(e.personaId)}},[null==t?void 0:t.personaId,a]);return(null==t?void 0:t.temporary)?(0,s.jsx)(p.fz0,{className:"h-4 w-4"}):i&&(0,s.jsx)("span",{className:(0,N.cn)("[&>svg]:h-4 [&>svg]:w-4",i.colorClassName),children:i.icon})};var ey=a(85703);function eb(e){let{id:t,element:a,children:i,options:n,isDragging:r,disabled:l=!1}=e,{attributes:o,listeners:c,setNodeRef:d,transform:u,transition:p}=(0,ed.gl)({id:t,transition:{duration:150,easing:"cubic-bezier(0.25, 1, 0.5, 1)"},disabled:l,...n}),m={transform:ey.Ks.Transform.toString(u),transition:p,opacity:+!r};return(0,s.jsx)(a||"div",{ref:d,...c,...o,style:m,children:i})}let ej=()=>{let{routeToConversation:e}=(0,er.o)(),t=(0,M._)(),a=(0,X.K)(),i=(0,en.a)(O.A("drawerOpen")),n=(0,en.a)(O.A("menuFixed")),r=(0,en.a)(O.A("menuHidden")),l=(0,en.a)(O.A("tabByConversationId")),c=(0,en.a)(O.A("inEditId")),d=(0,o.aP)(O.A("conversationId")),[u,g]=(0,b.useState)(),[h,v]=(0,b.useState)(""),[w,I]=(0,b.useState)(!1);!function(){let e=(0,o.aP)(O.A("conversationId"));(0,b.useEffect)(()=>{if(e){let{upsertConversationAsTab:t,tabByConversationId:a}=en.a.getState(),{fetchGetConversation:s}=ei.w1.getState();a[e]||s(e).then(e=>{t(e,void 0,!1)}).catch((0,f.HX)("use-observe-conversation-id:fetchGetConversation"))}},[e])}();let k=(0,x.c)(),{t:S}=(0,j.Bd)("base"),C=(0,b.useMemo)(()=>Object.values(l).sort((e,t)=>e.index-t.index),[l]),E=(0,b.useCallback)(a=>{let s=l[a];if(a===d){if(!s)return;if(0===s.index){let t=C[s.index+1];t?e(t.conversationId,s.isTemporary):e(void 0)}else{let t=C[s.index-1];t?e(t.conversationId,s.isTemporary):e(void 0)}}let{removeTab:i}=en.a.getState();i(a),t("close_tab",a,{location:"tabs-manager"})},[d,e,C,t,l]),P=(0,b.useCallback)(e=>{let t=l[e];if(!t)return;let{setInEditId:a}=en.a.getState();a(t.conversationId),v(t.title)},[l]),_=(0,b.useCallback)(async e=>{if(c!==e)return;let s=h.trim();if(""===s)return;let{setInEditId:i}=en.a.getState();try{let{fetchUpdateConversation:a}=ei.w1.getState();await a(e,{title:s}),i(void 0),t("update_conversation",e,{location:"tabs-manager"})}catch(e){a("tabs-manager:handleEditSave",e)}},[c,h,t,a]),A=el(()=>{c&&T()}),T=(0,b.useCallback)(()=>{let{setInEditId:e}=en.a.getState();e(void 0),v("")},[]),z=(0,eo.MS)(eo.cA,{activationConstraint:{distance:8}}),R=(0,eo.FR)(z),D=(0,b.useCallback)(e=>{let{setInEditId:t}=en.a.getState();g(e.active.id),t(void 0)},[]),U=(0,b.useCallback)(e=>{let{appendTabByConversationId:a}=en.a.getState(),{active:s,over:i}=e,n=null==s?void 0:s.id,r=null==i?void 0:i.id;if(n&&r&&n!==r){let e=C.findIndex(e=>e.conversationId===n),t=C.findIndex(e=>e.conversationId===r);if(-1===e||-1===t)return;a((0,ed.be)(C,e,t).map((e,t)=>({...e,index:t})))}g(void 0),t("reorder_tab","",{location:"tabs-manager:handleDragEnd"})},[C,t]),L=(0,b.useCallback)(()=>{g(void 0)},[]),K=(0,b.useCallback)(()=>{let{setMenuHidden:e,toggleMenuFixed:t,menuFixed:a}=en.a.getState();t(),e(!a)},[]),B=(0,b.useCallback)(e=>{let{setMenuHidden:t,setInEditId:a}=en.a.getState();e.clientX>24&&t(!0),a(void 0)},[]),F=(0,b.useCallback)(e=>{let{setMenuHidden:t}=en.a.getState();e.clientX<64&&t(!1)},[]),q=(0,b.useCallback)(()=>{let{setDrawerOpen:e}=en.a.getState();e(!1)},[]),G=(0,b.useCallback)(()=>{let{setTabByConversationId:e,tabByConversationId:a,setDrawerOpen:s}=en.a.getState();e(d?ep().pick(a,d):{}),I(!1),s(!1),t("clear_all_tabs","",{location:"tabs-manager:handleClearAll"})},[d,t]),W=(0,b.useMemo)(()=>{if(!u)return;let{tabByConversationId:e}=en.a.getState();return e[u]},[u]),V=(0,b.useCallback)(a=>{let{setDrawerOpen:s,inEditId:i,upsertTab:n}=en.a.getState();if(a===i)return;T(),s(!1);let r=l[a];r&&(r.isPreserved||n({...r,isPreserved:!0}),e(r.conversationId,r.isTemporary),t("select_conversation",r.conversationId,{location:"tabs-manager"}))},[T,e,t,l]),$=(0,b.useMemo)(()=>C.map(e=>e.conversationId),[C]),Q=(0,b.useMemo)(()=>{let{tabByConversationId:e}=en.a.getState();return Object.values(e).length},[]);return k&&Q>0?(0,s.jsx)(H._s,{open:i,onClose:q,dismissible:!0,children:(0,s.jsxs)(H.zj,{className:"bg-surface-base px-2 max-h-[90vh] focus:outline-none",children:[(0,s.jsxs)(H.BE,{className:"px-2 w-full pb-0 flex items-center h-8 gap-1",children:[(0,s.jsx)(H.gk,{className:"text-primary flex-1 whitespace-nowrap text-sm font-medium truncate text-left",children:S("active-tabs.label",{count:Q,defaultValue_one:"Tab",defaultValue_other:"Tabs"})}),(0,s.jsx)("div",{className:"h-5 min-w-5 p-1 bg-surface-l1 text-xs flex items-center justify-center border border-border-l2 rounded-lg ms-1.5",children:Q}),Q>1&&(0,s.jsx)(m.$n,{className:(0,N.cn)("text-fg-secondary h-6 inline-block w-fit transition-[max-width] duration-200 ease-in-out overflow-hidden px-2",w?"opacity-100 max-w-full":"opacity-70 hover:opacity-100 max-w-6"),onClick:G,variant:"ghost",size:"iconSm",children:(0,s.jsx)(y.P.span,{variants:ew,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"flex items-center justify-center whitespace-nowrap",children:w?(0,s.jsx)("span",{className:"text-xs font-medium",children:S("clear-tabs-button.label","Clear")}):(0,s.jsx)(p.uv5,{className:"w-4 h-4"})},w?"clear":"xicon")})]}),(0,s.jsx)("div",{className:(0,N.cn)("flex flex-col z-[200] h-full w-full gap-1 py-4 min-h-[50dvh] overflow-y-auto","mask-image:linear-gradient(to_bottom,transparent_0%,black_16px,black_calc(100%-16px),transparent_100%)","-webkit-mask-image:linear-gradient(to_bottom,transparent_0%,black_16px,black_calc(100%-16px),transparent_100%)"),children:C.map(e=>(0,s.jsx)(ef,{showActions:!0,className:"py-3 rounded-xl",isLoading:!1,isEditing:c===e.conversationId,newTitle:h,onNewTitleChange:v,onEditStart:P,onRemove:E,onEditSave:_,onEditCancel:T,tab:e,onSelect:V,isActive:d===e.conversationId,isDragging:e.conversationId===u},e.conversationId))})]})}):!k&&Q>0?(0,s.jsxs)("div",{ref:A,className:(0,N.cn)("group/menu mx-1 flex flex-col absolute top-16 left-0","max-h-[calc(100dvh-80px)] h-full px-2 py-1 pb-2","z-[200]","border border-border-l1","w-52 @[1440px]/mainview:w-64","bg-surface-l3 shadow-md rounded-3xl","transition-all duration-200 ease-in-out",r?"-translate-x-[220px] @[1440px]/mainview:-translate-x-[268px] px-2 pb-2":"translate-x-0 ",n&&"@7xl/mainview:!translate-x-0 @7xl/mainview:shadow-none @7xl/mainview:bg-surface-base @7xl/mainview:border-0 @7xl/mainview:p-0"),onMouseEnter:F,onMouseLeave:B,children:[(0,s.jsx)("div",{onMouseEnter:F,className:"h-full absolute -right-6 w-6 @4xl/mainview:-right-9 @4xl/mainview:w-9"}),(0,s.jsxs)(eo.Mp,{sensors:R,collisionDetection:eo.fp,onDragStart:D,onDragEnd:U,onDragCancel:L,modifiers:[ec.gj],children:[(0,s.jsx)(ed.gB,{items:$,strategy:ed._G,children:(0,s.jsx)("div",{className:(0,N.cn)("flex flex-col gap-1 h-full overflow-y-auto py-1","mask-image:linear-gradient(to_bottom,transparent_0%,black_4px,black_calc(100%-4px),transparent_100%)","-webkit-mask-image:linear-gradient(to_bottom,transparent_0%,black_4px,black_calc(100%-4px),transparent_100%)"),children:C.map(e=>(0,s.jsx)(eb,{disabled:c===e.conversationId,id:e.conversationId,isDragging:e.conversationId===u,children:(0,s.jsx)(ef,{isEditing:c===e.conversationId,isLoading:!1,newTitle:h,onNewTitleChange:v,onEditStart:P,onRemove:E,onEditSave:_,onEditCancel:T,tab:e,onSelect:V,isActive:d===e.conversationId,isDragging:e.conversationId===u})},e.conversationId))})}),(0,s.jsx)(eo.Hd,{children:W?(0,s.jsx)(e=>{let{tab:t,isMobile:a}=e;return(0,s.jsx)(ef,{onRemove:E,isEditing:c===t.conversationId,newTitle:h,onNewTitleChange:v,onEditStart:P,onEditSave:_,onEditCancel:T,tab:t,onSelect:V,isActive:d===t.conversationId,isDragging:!0,showActions:a,className:(0,N.cn)(a?"py-3 rounded-xl":"","!bg-surface-l3 !text-fg-primary shadow-sm !opacity-100 absolute -translate-y-16 cursor-move z-[100]")},t.conversationId)},{tab:W,isMobile:!1}):null})]}),(0,s.jsxs)("div",{className:" flex items-center group w-full justify-between py-1 h-8 rounded-xl transition-colors focus:outline-none focus-visible:ring-1 ring-ring ring-inset max-w-full",children:[(0,s.jsx)(m.$n,{onClick:G,variant:"ghostSecondary",rounded:!0,size:"sm",className:"opacity-50 group-hover/menu:opacity-100 transition-opacity",children:(0,s.jsx)("span",{className:"text-xs font-medium",children:S("clear-tabs-button.label","Clear")})}),(0,s.jsx)(m.$n,{onClick:K,variant:"ghostSecondary",size:"iconSm",rounded:!0,"aria-label":n?S("toggle-tabs-visibility.close","Hide tabs"):S("toggle-tabs-visibility.lock","Lock tabs"),className:(0,N.cn)("hidden @4xl/mainview:flex opacity-50 group-hover/menu:opacity-100 transition-opacity"),children:(0,s.jsx)(p.O_5,{className:(0,N.cn)("h-4 w-4 transition-transform text-fg-secondary",n?"rotate-0":"rotate-180")})})]})]}):null},ew={initial:{opacity:0,translateX:-1},animate:{opacity:1,translateX:0},exit:{opacity:0,translateX:-1}};var eI=a(48795),ek=a(95739),eN=a(46748),eS=a(89482),eC=a(84499),eE=a(39116),eP=a(10084),e_=a(62519),eA=a(13504),eM=a(5663),eT=a(33231),ez=a(26067),eR=a(82767),eD=a(65912),eU=a(98100),eO=a(24429),eL=a(44845),eK=a(82127),eB=a(34140),eF=a(73304),eq=a(20301),eG=a(6132);let eW=eG.z.enum(["deepsearch","brainstorm","analyzeData","createImage","code","search","createReport","finance"]),eH=eG.z.object({type:eG.z.literal("stockMiniSummary"),summary:eG.z.object({ticker:eG.z.string(),name:eG.z.string(),value:eG.z.number(),change:eG.z.number(),changePercent:eG.z.number(),unit:eG.z.string(),market:eG.z.string(),tickerType:eG.z.string()})}),eV=eG.z.discriminatedUnion("type",[eH]),e$=eG.z.object({prefix:eG.z.string().optional(),prompt:eG.z.string().optional(),label:eG.z.string(),type:eW,icon:eG.z.string().optional(),payload:eV.optional()});eG.z.object({label:eG.z.string(),prompt:eG.z.string().optional(),type:eW,img:eG.z.string().optional(),description:eG.z.string().optional(),prefix:eG.z.string().optional(),payload:eV.optional()});let eQ=["en"],eX=[{type:"createImage",prefix:"Draw ",label:"Create Images"},{type:"deepsearch",prefix:"Research ",label:"Research"},{type:"brainstorm",prefix:"How ",label:"How to"},{type:"analyzeData",prefix:"Help me ",label:"Analyze"},{type:"code",prefix:"Help me ",label:"Code"}];var eY=a(42557),eJ=a(25859);let eZ=()=>{let{t:e}=(0,j.Bd)("base"),t=(0,R.j)(O.A("open")),a=(0,M._)(),{user:i}=(0,eY.wV)(),n=(0,eE.useRouter)(),r=(0,b.useCallback)(()=>{if(!i){a("sign_in_redirect",void 0,{location:"edit-image-suggestion-pill"}),n.push("/sign-in");return}a("image_editor_open",void 0,{location:"suggestion-pill"}),t()},[i,t,a,n]);return(0,s.jsxs)(eJ.gx,{variant:"secondary",size:"md",shape:"pill",tooltipProps:{delayDuration:100},tooltipContentProps:{side:"bottom",className:"bg-fg-primary text-background"},tooltipContent:i?void 0:e("Sign in to edit images","Sign in to edit images"),onClick:r,children:[(0,s.jsx)(p.mgJ,{size:18,strokeWidth:2,className:"text-secondary"}),(0,s.jsx)("span",{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:e("Edit Image","Edit Image")})]})};var e0=a(50222),e1=a(32507);function e2(){let{push:e}=(0,eC.wK)(),t=(0,M._)(),{t:a}=(0,j.Bd)("base"),i=(0,b.useCallback)(()=>{t("deepsearch_pill_clicked",void 0,{location:"deepsearch-suggestion-pill"}),e({page:"workspace",workspaceId:e1.ux})},[t,e]);return(0,s.jsxs)(eJ.$n,{variant:"secondary",size:"md",shape:"pill",onClick:i,children:[(0,s.jsx)(e0.A,{size:16,strokeWidth:2,className:"text-secondary"}),a("deep-search","DeepSearch")]})}var e6=a(21782);function e3(e){let{suggestion:t,onClick:a}=e,{label:i}=t,n=(0,b.useCallback)(()=>{a(t)},[a,t]);return(0,s.jsxs)(eJ.$n,{size:"md",variant:"secondary",shape:"pill",onClick:n,children:[(0,s.jsx)(e4,{suggestion:t}),(0,s.jsx)("p",{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:i})]})}function e5(e){let{suggestions:t,onClick:a,handleSend:i}=e,{user:n}=(0,eY.wV)(),r=(0,P.h)(),l=(0,U.C$)(O.A("isIncognito")),o=!l,c=Math.min(t.length,5)-!!o-!!(n&&!l)-2,d=(0,e6.f)(),u=eQ.includes(d),p=r.SHOW_DEEPSEARCH_SUGGESTION_PILL;return(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)("div",{className:"flex flex-row flex-wrap w-full gap-2 @sm:gap-2 justify-center items-center",children:[p&&(0,s.jsx)(e2,{}),u&&t.slice(0,c).map(e=>{let t=e.type+e.prefix+e.prompt;return(0,s.jsx)(e3,{suggestion:e,onClick:a},t)}),o&&!p&&(0,s.jsx)(eZ,{}),(0,s.jsx)(ex.Ph,{handleSend:i})]})})}function e4(e){let{suggestion:t}=e,[a,i]=(0,b.useState)(!1),[n,r]=(0,b.useState)(!0);return t.icon&&!a?(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)(e9,{suggestion:t}),(0,s.jsx)("img",{src:t.icon,alt:"".concat(t.type," icon"),className:"me-2 h-[18px] w-[18px] object-contain",onError:()=>i(!0),onLoad:()=>r(!1),style:{display:n?"none":"block"}})]}):(0,s.jsx)(e9,{suggestion:t})}let e8={className:"text-secondary",strokeWidth:2,size:18};function e9(e){let{suggestion:t}=e;switch(t.type){case"deepsearch":return(0,s.jsx)(p.Dd5,{...e8});case"brainstorm":return(0,s.jsx)(p.KqI,{...e8});case"analyzeData":case"createReport":return(0,s.jsx)(p.EsT,{...e8});case"createImage":return(0,s.jsx)(p.XGR,{...e8});case"code":return(0,s.jsx)(p.CyN,{...e8});default:return(0,s.jsx)(s.Fragment,{})}}let e7=(e,t)=>{var a,s;let i="",n=0;for(;n<e.length&&(null==(a=e[n])?void 0:a.toLowerCase())===(null==t||null==(s=t[n])?void 0:s.toLowerCase());)i+=e[n],n++;return i},te=e=>{let{suggestion:t,search:a}=e,i=t.text.split(" ").map(e=>({text:e,isHighlighted:!1})),n=a.split(" ");return i=i.map((e,t)=>{if(t>=n.length||!n[t])return e;let a=n[t].toLowerCase()===e.text.toLowerCase();return{...e,isHighlighted:a}}),(0,s.jsx)(s.Fragment,{children:i.map((e,t)=>{if(t===n.length-1&&n[t]&&e.text.toLowerCase().includes(n[t])){var a;let i=e7(e.text,n[t]);return(0,s.jsxs)(b.Fragment,{children:[(0,s.jsx)("span",{className:"font-medium text-primary",children:i}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[null==(a=e.text)?void 0:a.slice(null==i?void 0:i.length),"\xa0"]})]},t)}return e.isHighlighted?(0,s.jsxs)("span",{className:"font-medium text-primary",children:[e.text,"\xa0"]},t):(0,s.jsxs)("span",{className:"text-muted-foreground",children:[e.text,"\xa0"]},t)})})};var tt=a(75036),ta=a(76393),ts=a(10463),ti=a(4868),tn=a(20143),tr=a(56907),tl=a(55985);function to(e){var t,a,i,n,r,l,o,c,d,u,m,g,x,h,f,w,I,k,S,C,E,_;let{suggestion:A}=e,M={type:"finance",label:null!=(h=(l=A.summary).ticker)?h:"",payload:{type:"stockMiniSummary",summary:{ticker:null!=(f=l.ticker)?f:"",name:null!=(w=null==(o=l.stockOverview)?void 0:o.name)?w:"",value:null!=(I=null==(c=l.financeValue)?void 0:c.value)?I:0,change:null!=(k=null==(d=l.financeValue)?void 0:d.change)?k:0,changePercent:null!=(S=null==(u=l.financeValue)?void 0:u.changePercent)?S:0,unit:null!=(C=null==(m=l.financeValue)?void 0:m.unit)?C:"",market:null!=(E=null==(g=l.stockOverview)?void 0:g.market)?E:"",tickerType:null!=(_=null==(x=l.stockOverview)?void 0:x.tickerType)?_:""}}}.payload,{t:T,i18n:z}=(0,j.Bd)("finance"),R=(0,P.h)(),{push:D}=(0,eC.wK)(),{stockFinancialTimeframe:U,stockTimeSpan:O}=(0,ti.a)(),L=(0,tr.jE)(),K=null!=(t=M.summary.value)?t:0,B=null!=(a=M.summary.change)?a:0,F=null!=(i=M.summary.changePercent)?i:0,q=(0,tt.h)(!0,z.language),G=(null!=(r=null!=(n=M.summary.name)?n:M.summary.ticker)?r:"").replace(" Common Stock",""),[W,H]=(0,b.useState)(!1),V=M.summary.ticker in ts.s?ts.s[M.summary.ticker]:null,$=(0,b.useCallback)(async()=>{H(!0),await L.prefetchQuery({queryKey:[tn.p8,M.summary.ticker,O],queryFn:async()=>await tl.rA.financeGetStockChartData({ticker:M.summary.ticker,timespan:O})}),await L.prefetchQuery({queryKey:[tn.fL,M.summary.ticker,U],queryFn:async()=>await tl.rA.financeGetStockFinancials({ticker:M.summary.ticker,timeframe:U})}),await L.prefetchQuery({queryKey:[tn.hu,M.summary.ticker],queryFn:async()=>await tl.rA.financeGetStockSummary({ticker:M.summary.ticker})})},[H,M.summary.ticker,L,O,U]);return(0,s.jsxs)("div",{className:(0,N.cn)("flex flex-grow flex-row content-center items-center px-0 sm:px-3 py-2 w-max text-muted-foreground","rounded-[16px] text-sm"),onMouseOver:$,onMouseLeave:()=>H(!1),children:[(0,s.jsx)("div",{className:"flex items-center gap-1 min-w-[5%] pr-2",children:V?(0,s.jsx)("img",{src:V,alt:M.summary.ticker,className:"w-8 h-8"}):(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8",children:(0,s.jsx)(p.ntg,{className:"w-6 h-6 text-fg-secondary"})})}),(0,s.jsxs)("div",{className:(0,N.cn)("flex-1 flex-col max-w-[95%] gap-1"),children:[(0,s.jsxs)("div",{className:(0,N.cn)("flex items-center w-full gap-1"),children:[(0,s.jsx)("span",{className:(0,N.cn)("text-fg-primary"),children:M.summary.ticker})," \xb7"," ",(0,s.jsx)("span",{children:G})]}),(0,s.jsxs)("div",{className:(0,N.cn)("flex items-center w-full gap-1"),children:[(0,s.jsx)("span",{className:(0,N.cn)("font-semibold"),children:q(K,M.summary.unit)}),(0,s.jsx)(ta.p,{value:B,formatter:e=>e.toFixed(K<1?3:2)}),(0,s.jsx)(ta.p,{value:F,formatter:e=>"".concat(e.toFixed(2),"%"),prefix:"(",suffix:")"})]})]}),(0,s.jsx)("div",{className:(0,N.cn)("flex items-center justify-center min-w-[5%]"),children:R.SHOW_FINANCIAL_PAGE&&"CS"===M.summary.tickerType&&(0,s.jsx)(v.N,{children:W&&(0,s.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeInOut"},children:(0,s.jsx)(eJ.gx,{variant:"tertiary",tooltipContent:T("suggestions-button.tooltip","Click to visit the Finance page"),"aria-label":"Click to visit the Finance page",size:"sm",shape:"square",onClick:()=>D({page:"finance",ticker:M.summary.ticker}),children:(0,s.jsx)(p.c_$,{})})})})})]})}var tc=a(42151),td=a(58939);let tu=e=>{let{suggestions:t,position:a,onPositionChange:i,onPositionSelect:n,highlightText:r,keyboardNavigationEnabled:l=!0,incrementSuggestionsShownCount:o}=e;return(0,b.useEffect)(()=>{let e=null==t?void 0:t.length;if(!e||!l)return;let s=t=>{if("Enter"===t.key&&!t.shiftKey&&void 0!==a){t.preventDefault(),t.stopPropagation(),n(a);return}let s=0;"ArrowDown"===t.key&&(t.preventDefault(),void 0!==a&&(s=(a+1)%e),a===e-1&&(s=void 0)),"ArrowUp"===t.key&&(t.preventDefault(),void 0!==a&&(s=(a-1)%e),0===a&&(s=void 0),void 0===a&&(s=e-1)),("ArrowUp"===t.key||"ArrowDown"===t.key)&&i(s)};return document.addEventListener("keydown",s,{capture:!0}),()=>document.removeEventListener("keydown",s,{capture:!0})},[a,i,t,n,l]),(0,s.jsx)(y.P.ul,{className:"pb-2 overflow-hidden bg-background min-h-36",style:{display:"flex",flexDirection:"column"},onMouseLeave:()=>{i(void 0)},children:(0,s.jsx)(v.N,{children:t.map((e,t)=>(0,s.jsx)(y.P.li,{className:(0,N.cn)("cursor-pointer rounded-xl flex flex-row items-center",a===t?"sm:border-input-border-focus sm:bg-button-ghost-hover":"","stock"===e.type?"h-auto":"h-12 py-2 sm:px-3"),onMouseMove:()=>{t!==a&&i(t)},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20,transition:{duration:.05}},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>{n(t)},transition:{type:"spring",stiffness:700,damping:35,delay:.05*t},onAnimationComplete:()=>{null==o||o()},children:(0,s.jsx)(tp,{suggestion:e,highlightText:r})},t))})})};function tp(e){let{suggestion:t,highlightText:a}=e;return"stock"===t.type?(0,s.jsx)(to,{suggestion:t}):"project"===t.type?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(td.Oh,{icon:t.project.icon,className:"hidden @sm:flex justify-start h-5 w-10 px-2"}),(0,s.jsx)("div",{className:"leading-[1.2]",children:t.project.name})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hidden @sm:flex justify-start h-5 w-10 px-2",children:(0,s.jsx)(tc.A,{className:"h-5 w-5 text-fg-secondary"})}),(0,s.jsx)("div",{className:"leading-[1.2]",children:(0,s.jsx)(te,{suggestion:t,search:a})})]})}var tm=a(88753);function tg(e){let{className:t,handleSend:a,position:i,setPosition:n,incrementSuggestionsShownCount:r=()=>{},focusTextArea:l=()=>{}}=e,c=(0,P.h)(),d=(0,o.aP)(O.A("setProjectId")),u=(0,o.aP)(O.A("conversationId"))||"no_conversation_id",p=(0,o.aP)(e=>e.queryByConversationId[u])||"",m=(0,b.useCallback)(e=>{let{idsetQueryByConversationId:t}=o.aP.getState();t(e,u)},[u]),g=(0,M._)(),[x,h]=(0,b.useState)(p),f=(0,tm.Pt)(x),v=(0,b.useRef)(""),j=e=>{v.current=e,m(e)};(0,b.useEffect)(()=>{p||n(void 0),(v.current!==p||""===p)&&h(p)},[n,p]);let w=!p||!(null==f?void 0:f.length),I=function(){var e;let t=null==(e=(0,P.h)().EXTRA_SUGGESTIONS.value)?void 0:e.extraSuggestions;return(0,b.useMemo)(()=>{if(t)return[...Array.isArray(t)?t.map(e=>e$.safeParse(e)).filter(e=>e.success).map(e=>e.data):[],...eX];return eX},[t])}(),k=(0,b.useCallback)(e=>{if(e.prefix){var t;let a="".concat(null==(t=e.prefix)?void 0:t.trim()).concat(p?":":"");(null==p?void 0:p.includes(a))||(m("".concat(a," ").concat(p)),null==l||l())}else e.prompt&&a({query:e.prompt,toolOverrides:{webSearch:!0,xSearch:!0,xMediaSearch:!0,trendsSearch:!0,xPostAnalyze:!0},isPreset:!!c.SUGGESTIONS_USE_CACHE});g("click_suggestion_pill",e.label,{suggestionType:e.type,suggestionPrefix:String(e.prefix),suggestionPrompt:String(e.prompt),location:"chat-autocomplete-suggestions:handleClickTile"})},[m,p,a,c.SUGGESTIONS_USE_CACHE,g,l]),S=!p.includes("\n")&&p.length<75;return(0,s.jsx)(y.P.div,{variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},initial:"hidden",animate:"visible",exit:"hidden",className:"w-full flex justify-center",children:(0,s.jsxs)("div",{className:(0,N.cn)("z-10 w-full @xl:w-4/5 overflow-x-auto no-touch-scrollbar will-change-[mask-image] @sm:[mask-image:none] min-h-10",eR.Q,t),children:[(0,s.jsx)("div",{className:(0,N.cn)("absolute","bg-background w-full",eR.Q,"transition-opacity",f&&0!==f.length?"opacity-100":"opacity-0 pointer-events-none"),children:(0,s.jsx)(tu,{suggestions:f,position:i,onPositionChange:e=>{if(n(e),void 0===e)j(x);else{let a=f[e];if((null==a?void 0:a.type)==="search"&&j(a.text),(null==a?void 0:a.type)==="stock"){var t;j(null!=(t=a.summary.ticker)?t:"")}}},onPositionSelect:e=>{let t=f[e];if(t){if(g("suggestion_selected",void 0,{suggestionType:t.type,position:String(i),location:"chat-autocomplete-suggestions"}),(null==t?void 0:t.type)==="search"&&a({query:t.text,toolOverrides:{webSearch:!0,xSearch:!0,xMediaSearch:!0,trendsSearch:!0,xPostAnalyze:!0}}),(null==t?void 0:t.type)==="stock"){var s;a({query:null!=(s=t.summary.ticker)?s:"",toolOverrides:{webSearch:!0,xSearch:!0,xMediaSearch:!0,trendsSearch:!0,xPostAnalyze:!0}})}(null==t?void 0:t.type)==="project"&&d(t.project.workspaceId),j(""),n(void 0),h("")}},highlightText:x,keyboardNavigationEnabled:S,incrementSuggestionsShownCount:r})}),w&&(0,s.jsx)(e5,{suggestions:I,onClick:k,handleSend:a})]})},"suggestions")}var tx=a(27636);let th=e=>{let{onHide:t}=e,a=(0,M._)(),i=(0,F.Di)(),{t:n}=(0,j.Bd)("tasks"),{taskPresets:r}=(0,tx.hB)(),l=(0,eF.d)(O.A("setCreateDialogIsOpen")),o=(0,eF.d)(O.A("setTaskToEdit")),[c,d]=(0,b.useState)(tv(r)[0]),u=(0,b.useCallback)(()=>{a("task_preset_clicked",void 0,{location:"PresetTaskPill"}),l(!0),o(c)},[c,l,o,a]),g=(0,b.useCallback)(e=>{a("task_preset_clicked",void 0,{location:"PresetTaskPill"}),l(!0),o(e),d(e)},[l,o,a]);return c?(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full justify-center",children:[(0,s.jsxs)("div",{className:(0,N.cn)("rounded-3xl p-3 bg-surface-l1 border text-xs flex items-center justify-between",{"min-w-[500px]":!i}),children:[(0,s.jsx)(tf,{value:c,onValueChange:g}),(0,s.jsxs)(m.$n,{variant:"filledSecondary",size:"sm",rounded:!0,onClick:u,className:"font-semibold",children:[(0,s.jsx)(p.mdw,{size:14}),i?n("create-custom-task-dialog.schedule-task-short","Schedule"):n("create-custom-task-dialog.schedule-task","Schedule Task")]})]}),(0,s.jsx)(m.gx,{tooltipContent:(0,s.jsx)("p",{children:n("create-custom-task-dialog.schedule-task-hide","Hide")}),tooltipContentProps:{side:"bottom"},variant:"filledSecondary",size:"iconMd",rounded:!0,"aria-label":n("create-custom-task-dialog.schedule-task-hide","Hide"),onClick:t,children:(0,s.jsx)(p.X,{size:14})})]}):null};function tf(e){let{value:t,onValueChange:a}=e,[i,n]=(0,b.useState)(!1),{taskPresets:r}=(0,tx.hB)(),{t:l}=(0,j.Bd)("tasks"),o=(0,F.Di)(),c=(0,b.useCallback)(e=>{n(e)},[]);return(0,s.jsxs)(V.rI,{open:i,onOpenChange:c,children:[(0,s.jsx)(V.ty,{asChild:!0,children:(0,s.jsxs)(m.$n,{className:"flex items-center font-semibold",variant:"text","aria-label":l("selected-day.label","Selected day"),size:"sm",children:[t.cta||t.name,(0,s.jsx)(p.yQN,{size:14,className:(0,N.cn)("transition-transform duration-200",{"rotate-180":i})})]})}),(0,s.jsx)(V.SQ,{side:"bottom",align:"start",sideOffset:20,alignOffset:-12,className:(0,N.cn)({"w-[500px]":!o}),children:tv(r).map(e=>(0,s.jsxs)(V._2,{onSelect:()=>{a(e)},className:"group flex items-center justify-between gap-2",children:[e.name,(0,s.jsx)(p.c_$,{size:14,className:"opacity-0 group-hover:opacity-100"})]},e.name))})]})}function tv(e){for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}let ty=()=>(0,s.jsx)(s.Fragment,{});var tb=a(625),tj=a(66570);function tw(){let{t:e,i18n:t}=(0,j.Bd)("chat"),{isSuperGrokUser:a,isEnterpriseUser:i,isSuperGrokProUser:n,bestSubscription:r,isPending:c}=(0,eO.Q2)(),{currentTeam:d}=(0,tb.hd)(),u=(0,eF.d)(O.A("userActiveTasks")),m=(0,eF.d)(O.A("initialized")),g=(0,U.C$)(O.A("selectedLanguage")),x=(0,b.useMemo)(()=>g||t.languages.find(e=>e in ez.IV)||ez.GG,[t.languages,g]),h=(0,l.a8)({isSuperGrokPro:n,isSuperGrok:a,isEnterprise:i,isTeamInSession:!!d,language:x}),w=(0,b.useRef)(""),{signInWithReturnTo:I}=(0,er.o)(),k=(0,M._)(),S=(0,P.h)(),{handleVoiceModeEnter:C}=(0,eI.F)({location:"chat-new"}),_=(0,o.aP)(O.A("establishNewConversation")),A=(0,U.C$)(O.A("isIncognito")),T=(0,o.aP)(O.A("activeModelId")),D=(0,o.aP)(O.A("defaultAnonModelId")),L=(0,o.aP)(O.A("defaultFreeModelId")),K=(0,o.aP)(O.A("defaultProModelId")),B=(0,o.aP)(O.A("setDefaultAnonModelId")),q=(0,o.aP)(O.A("setDefaultFreeModelId")),G=(0,o.aP)(O.A("setDefaultProModelId")),W=(0,o.aP)(O.A("outputMode")),H=(0,o.aP)(O.A("reasoningMode")),V=(0,o.aP)(O.A("setReasoningMode")),$=(0,o.aP)(O.A("conversationId")),{sessionStartTime:Q,conversationDepth:X}=(0,eK.T)($),Y=(0,F.Di)(),J=(0,z.x)(O.A("listByConversationId")),Z=(0,z.x)(O.A("attachListByConversationId")),ee=(0,R.j)(O.A("isOpen")),et=(0,b.useMemo)(()=>J.no_conversation_id||[],[J]),ea=(0,b.useMemo)(()=>Z.no_conversation_id||[],[Z]),ei=(0,eU.$E)(),en=(0,F.Di)(),el=(0,b.useMemo)(()=>!A&&(et.length>0&&!!et.every(e=>e.file.type.includes("image"))||(null==ea?void 0:ea.length)>0&&!!ea.every(e=>e.mimeType.includes("image"))),[et,ea,A]),eo=(0,b.useMemo)(()=>!A&&S.SHOW_CREATE_REPORT_BUTTON_ON_ATTACHMENTS&&(et.length>0&&!!et.every(e=>e.metadata&&e.file.type.includes("csv"))||(null==ea?void 0:ea.length)>0&&!!ea.every(e=>e.mimeType.includes("csv"))),[et,ea,S.SHOW_CREATE_REPORT_BUTTON_ON_ATTACHMENTS,A]),[ec,ed]=(0,b.useState)(!1);(0,b.useEffect)(()=>{var e;let t=null!=(e=window.localStorage.getItem("hideTaskPillCount"))?e:0;t=Number(t),S.REPLACE_HOME_PILLS_WITH_TASKS&&0===u.length&&t<2?ed(!0):ed(!1)},[S.REPLACE_HOME_PILLS_WITH_TASKS,u.length]);let eu=(0,b.useCallback)(()=>{var e;let t=null!=(e=window.localStorage.getItem("hideTaskPillCount"))?e:0;window.localStorage.setItem("hideTaskPillCount",String(Number(t)+1)),ed(!1)},[]),ep=(0,E.L)(),em=(0,es.useSession)().user;(0,b.useEffect)(()=>{S.NEW_CHAT_ALWAYS_AUTO&&o.aP.getState().setModelMode("auto")},[]);let eg=(0,b.useRef)(null),eh=(0,b.useCallback)(()=>{var e;null==(e=eg.current)||e.focus()},[eg]);(0,eT.v)(eM.Ib,eh,[]);let{handleKeyDown:ef,consumeCompositionTimeMs:ev,consumeBackspaceCount:ey,consumeAvgKeystrokeLatency:eb,consumeKeystrokeCount:ej,position:ew,setPosition:ek,consumePosition:eN,consumeTypeaheadReqCount:eS,incrementTypeaheadReqCount:eC,incrementSuggestionsShownCount:eE,consumeSuggestionsShownCount:eG}=(0,eD.T)(),eW=(0,b.useCallback)(async e=>{let{query:t,fileAttachmentIds:a,webpageUrls:s,toolOverrides:i,isPreset:n,workspaceIds:l,persona:c,isIncognitoOverride:d,disableMemory:u}=e;if(!t)return!1;if(!em&&(!S.ENABLE_ANON_USERS||ei.includes(T)))return k("sign_in","chat-new",{location:"chat-new"}),I(t,H),!1;let p=U.C$.getState(),m=eN(),g=i;tm.e9.getState().config.enabled&&-1!==m&&void 0!==m&&!i&&(g={webSearch:!0});let x=o.aP.getState(),h=(0,eB.m)({chatPageState:{activeModelId:T,modelMode:x.modelMode,outputMode:W,reasoningMode:H},query:t,fileAttachmentIds:a,webpageUrls:s,location:"chat-new",personalityId:p.userSettings.preferences.selectedSystemPromptId||"",personaId:"",sessionStartTime:Q,conversationDepth:X,isMobile:Y,bestSubscription:r,user:!!em,compositionTime:ev(),backspaceCount:ey(),avgKeystrokeLatency:eb(),keystrokeCount:ej(),position:m,typeaheadRequestCount:eS(),suggestionsShownCount:eG(),workspaceCount:(null==l?void 0:l.length)||0,toolOverrides:g});return k("send_query","",h),await ep(),(0,tj.Lc)(),!!await _({message:t,fileAttachmentIds:a,webpageUrls:s,toolOverrides:g,temporary:null!=d?d:A,isPreset:n,persona:c,enableRetries:S.ENABLE_AUTO_STREAM_RETRY,ff:S,workspaceIds:l,disableMemory:u}).catch(e=>{(0,f.vV)("chat-new:establishNewConversation",e)})},[T,em,S,k,A,W,H,ei,ep,_,eb,ey,ev,ej,eN,eG,eS,I,X,Y,Q,r]),{modelById:eH,defaultAnonModelId:eV,defaultFreeModelId:e$,defaultProModelId:eQ,isPending:eX}=(0,eU.GB)(),eY=(0,o.aP)(O.A("setActiveModelId")),eJ=(0,o.aP)(O.A("setModelMode"));(0,b.useEffect)(()=>{if(eX||c&&em)return;let e=new URLSearchParams(location.search),t=e.get("q"),s=e.get("reasoningMode"),r=e.get("fileid"),l=location.hash===eq.oE;if(K!==eQ&&(i||a||n)&&eQ&&eH[eQ]){G(eQ),eY(eQ);return}if(L!==e$&&em&&e$&&eH[e$]){q(e$),eY(e$);return}if(D!==eV&&eV&&eH[eV]){B(eV),eY(eV);return}if(s){let e=eL.TM.parse(s);e&&V(e)}t&&!w.current&&(eW({query:t,fileAttachmentIds:r?[r]:void 0,webpageUrls:[],isIncognitoOverride:l,disableMemory:!0}).catch(e=>{(0,f.vV)("chat-new:mount:handleSend",e)}),w.current="auto-start")},[eX,c]);let eZ=(0,b.useCallback)(t=>{let{query:a,parentQuotedText:s,fileAttachmentIds:i,webpageUrls:n,toolOverrides:r,isPreset:l,persona:o}=t;if(o){let t=(0,ex.pL)(o.personaId,e);t.modelMode&&eJ(t.modelMode)}eW({query:a,parentQuotedText:s,fileAttachmentIds:i,webpageUrls:n,toolOverrides:r,persona:o,isPreset:l}).catch(e=>{(0,f.vV)("chat-new:handleClickSuggestion",e)})},[eW,eJ,e]),e0=(0,b.useCallback)(()=>{let t=[...et.map(e=>e.metadata).filter(e=>e&&!(e instanceof Error)).map(e=>e.fileMetadataId),...ea.map(e=>e.assetId)];eW({query:e("create-report-prompt","Create a report"),fileAttachmentIds:t}).catch(e=>{(0,f.vV)("chat-new:handleClickCreateReport",e)})},[eW,et,ea,e]);return(0,b.useEffect)(()=>{(0,tj.b2)()},[]),(0,s.jsxs)("div",{className:"flex flex-col items-center w-full h-full p-2 mx-auto justify-center @sm:p-4 @sm:gap-9 isolate mt-16 @sm:mt-0 overflow-scroll",children:[S.SHOW_GROK_4_PROMOTION_DIALOG&&(0,s.jsx)(ty,{}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-6 h-[450px] w-full @sm:pt-12 isolate",children:[(0,s.jsxs)("div",{className:(0,N.cn)("flex flex-col items-center justify-center w-full @sm:px-4 px-2 gap-6 @sm:gap-4 @xl:w-4/5 flex-initial pb-0",eR.Q),children:[(0,s.jsx)(h,{height:64,width:320}),en&&(0,s.jsx)(tg,{className:(0,N.cn)("overflow-visible @sm:invisible",A&&"invisible"),handleSend:eZ,position:ew,setPosition:ek,incrementTypeaheadReqCount:eC,incrementSuggestionsShownCount:eE,focusTextArea:eh})]}),(0,s.jsxs)("div",{className:(0,N.cn)("absolute bottom-0 mx-auto inset-x-0",eR.Q,"@sm:relative flex flex-col items-center w-full gap-1 @sm:gap-5 @sm:bottom-auto @sm:inset-x-auto @sm:max-w-full"),children:[(0,s.jsxs)("div",{className:(0,N.cn)("flex flex-col-reverse items-center justify-between flex-1 w-full gap-0 @sm:gap-3 @sm:flex-col relative","p-2 @sm:p-0"),children:[(0,s.jsx)(e_.s,{className:"mt-2",textAreaClassName:"min-h-14 pt-5 my-0 mb-5",placeholder:e("query-bar-placeholder.1","What do you want to know?"),onQuery:eW,onFrontPage:!ee,ref:eg,isIncognito:A,enableVoiceMode:!0,onKeyDown:ef,onVoiceModeEnter:C},"query-bar"),(0,s.jsxs)(v.N,{mode:"popLayout",initial:!1,children:[el&&!A&&(0,s.jsx)(y.P.div,{variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},initial:"hidden",animate:"visible",exit:"hidden",className:"bg-background rounded-full",children:(0,s.jsxs)(eP.R,{shouldGetFromStore:!0,buttonProps:{variant:"filledSecondary",size:"md",rounded:!0},location:"chat-new-input",children:[(0,s.jsx)(p.mgJ,{className:"size-5 text-secondary"}),e("Edit Image","Edit Image")]})},"edit"),eo&&!A&&(0,s.jsx)(y.P.div,{variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},initial:"hidden",animate:"visible",exit:"hidden",className:"bg-background rounded-full",children:(0,s.jsx)(e3,{suggestion:{type:"createReport",label:e("create-report","Create Report")},onClick:e0})},"edit"),m&&!en&&(ec?(0,s.jsx)(y.P.div,{variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},initial:"hidden",animate:"visible",exit:"hidden",className:(0,N.cn)("w-full flex justify-center",{invisible:A}),children:(0,s.jsx)(th,{onHide:eu})},"task-pill"):!en&&!el&&!eo&&(0,s.jsx)(tg,{className:(0,N.cn)("hidden @sm:block overflow-visible",A&&"invisible"),handleSend:eZ,position:ew,setPosition:ek,incrementTypeaheadReqCount:eC,incrementSuggestionsShownCount:eE,focusTextArea:eh}))]})]}),em?null:(0,s.jsx)("div",{className:"text-[11px] @sm:text-xs text-secondary text-nowrap",children:(0,s.jsx)(j.x6,{ns:"chat",i18nKey:"clickwrapAgreement",defaults:"By messaging Grok, you agree to our <terms>Terms</terms> and <policy>Privacy Policy</policy>.",components:{terms:(0,s.jsx)("a",{className:"text-primary",href:"https://x.ai/legal/terms-of-service",target:"_blank",rel:"noopener noreferrer"}),policy:(0,s.jsx)("a",{className:"text-primary",href:"https://x.ai/legal/privacy-policy",target:"_blank",rel:"noopener noreferrer"})}})})]})]}),(0,s.jsx)(eA.tN,{})]})}var tI=a(48992),tk=a(80242);function tN(e){let{conversationIsLoading:t,conversationError:a,optimisticConversationId:i,conversationId:n,conversation:r}=e,l=(0,X.K)(),c=(0,o.aP)(O.A("reconnectToInflightResponses")),d=(0,o.aP)(O.A("conversationMode")),[u,p]=(0,b.useState)(!1),m=(0,P.h)();return((0,b.useEffect)(()=>{(null==r?void 0:r.conversationId)&&(r.isNew||(p(!0),c(r.conversationId,m.ENABLE_AUTO_STREAM_RETRY,m).catch(e=>{(0,f.vV)("chat-page:reconnectToInflightResponses",e)}).finally(()=>p(!1))),D.A3.getState().loadInitialResponses(r.conversationId).then(e=>{var t;let a=o.aP.getState();if(a.conversationId===(null==(t=e[0])?void 0:t.conversationId)){a.setThreadLastMessageId(void 0);let t=(0,tI.Mb)(e);if(!t){a.setLastMessageId(void 0),a.setThreadLastMessageId(void 0);return}if("streaming"===t.state||"reconnecting"===t.state){a.setLastMessageId(t.parentResponseId),a.setStreamedMessageId(t.responseId);return}if("optimistic"===t.state){a.setLastMessageId(t.parentResponseId),a.setOptimisticMessageId(t.responseId);return}a.setLastMessageId(t.responseId)}}).catch(e=>{l("chat-page:loadInitialResponses",e)}))},[null==r?void 0:r.conversationId]),i)?(0,s.jsx)(tk.T,{conversationId:i,conversation:void 0,isOptimisticConversation:!0,conversationIsLoading:t,conversationError:a,enableVoiceMode:!0},"voice"===d?"voice-chat-interaction":"chat-interaction"):n?(0,s.jsx)(tk.T,{conversationId:n,conversation:r||void 0,isOptimisticConversation:!1,conversationIsLoading:t,conversationError:a,isReconnecting:u,enableVoiceMode:!0},"chat-interaction"):null}var tS=a(38362);let tC=()=>{let{t:e}=(0,j.Bd)("base"),t=(0,P.h)(),[a,i]=(0,b.useState)(""),n=(0,o.aP)(e=>e.lastMessageId),r=(0,o.aP)(e=>e.streamedMessageId),l=(0,D.A3)(e=>e.byId),c=l[n||""],d=l[r||""],[u,p]=(0,A.M)("notifications-toast-dismiss-count",0),[m,g]=(0,b.useState)(0),x=(0,U.C$)(e=>e.userSettings.preferences.browserNotificationsEnabled),h=(0,b.useCallback)(()=>{var a;(null==(a=document)||!a.hasFocus())&&(null==t?void 0:t.ENABLE_BROWSER_NOTIFICATIONS)&&(new Notification(e("notifications-answer-ready","Your answer from Grok is ready.")).onclick=()=>{window.focus()})},[null==t?void 0:t.ENABLE_BROWSER_NOTIFICATIONS,e]),f=(0,b.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];L.oR.dismiss(a),i(""),e&&p(e=>e+1)},[p,a]),v=!!(null==d?void 0:d.liveThinkingStartTime)||!!(null==d?void 0:d.thinkingStartTime)||!!(null==d?void 0:d.searchingStartTime)||(null==d?void 0:d.steps)&&d.steps.length>0;return(0,b.useEffect)(()=>{if(!x&&d&&v){if((null==d?void 0:d.state)==="streaming")return void g(1e3);(null==c?void 0:c.state)==="closed"&&g(0)}},[d,c,x,v]),(0,b.useEffect)(()=>{if(0===m||x)return;let e=setTimeout(()=>g(e=>e+1e3),1e3);return()=>clearTimeout(e)},[x,m]),(0,b.useEffect)(()=>{let e=m>=3e3&&m<=4e3;!a&&!x&&e&&u<1&&(null==t?void 0:t.ENABLE_BROWSER_NOTIFICATIONS)&&i((0,L.oR)((0,s.jsx)(tE,{onDismiss:f}),{duration:1/0,className:"inset-x-0 mx-auto"}))},[u,f,null==t?void 0:t.ENABLE_BROWSER_NOTIFICATIONS,m,a]),(0,b.useEffect)(()=>{(null==c?void 0:c.liveThinkingStartTime)&&(null==c?void 0:c.state)==="closed"&&(x&&h(),a&&(c.partial?f(!1):setTimeout(()=>f(!1),2e3)))},[x,f,c,h,a]),h},tE=e=>{let{onDismiss:t}=e,{t:a}=(0,j.Bd)("base"),[i,n]=(0,b.useState)("ASK"),r=(0,U.C$)(O.A("fetchSetPreference")),l=async()=>{if("granted"===Notification.permission||(n("WAIT"),"granted"===await Notification.requestPermission())){n("ALLOWED"),await r("browserNotificationsEnabled",!0);return}n("DENIED")};return((0,b.useEffect)(()=>{if("ASK"===i||"WAIT"===i)return;let e=setTimeout(t,2e3);return()=>clearTimeout(e)},[t,i]),(0,x.f)())?null:"DENIED"===i?(0,s.jsxs)("div",{className:"flex items-center gap-4 min-w-[360px]",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold",children:a("notifications_declined_title","Notifications declined")}),(0,s.jsx)("div",{className:"text-xs text-secondary",children:a("notifications_change_anytime","You can change this anytime in settings.")})]}),(0,s.jsx)(p.X,{className:"size-5"})]}):"ALLOWED"===i?(0,s.jsxs)("div",{className:"flex items-center gap-4 min-w-[348px]",children:[(0,s.jsx)(p.Jlk,{className:"size-5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold",children:a("notifications_enabled_title","Notifications enabled")}),(0,s.jsx)("div",{className:"text-xs text-secondary",children:a("notifications_enabled_subtitle","We'll keep you updated")})]})]}):(0,s.jsxs)("div",{className:"flex justify-between items-center gap-4 relative group min-w-[360px]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(p.ZVq,{className:"size-5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold",children:a("notifications_ask_title","Get notified when Grok finishes answering")}),(0,s.jsx)("div",{className:"text-xs text-secondary",children:a("notifications_ask_subtitle","Enable notifications")})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 -me-2",children:[(0,s.jsx)(m.$n,{className:"rounded-xl px-2 py-2",variant:"secondary",disabled:"WAIT"===i,onClick:l,children:a("notifications_enable","Enable")}),(0,s.jsx)(m.$n,{variant:"textSecondary",size:"iconXs","aria-label":a("notifications-toast-dismiss","Dismiss"),onClick:()=>t(!0),children:(0,s.jsx)(p.X,{className:"!size-4"})})]})]})};function tP(e){let{conversationId:t,lastMessageId:a}=e,{t:i}=(0,j.Bd)("chat"),n=(0,o.aP)(O.A("requestShareDialogOpen")),r=(0,o.aP)(O.A("setRequestShareDialogOpen")),l=(0,F.Di)(),c=(0,M._)(),d=(0,b.useCallback)(e=>{r(e)},[r]);(0,b.useEffect)(()=>{n&&c("request_share_dialog_opened",void 0,{location:"request-share-dialog"})},[c,n]);let m=(0,b.useCallback)(()=>{r(!1)},[r]),g=(0,b.useCallback)(()=>{c("request_share_dialog_share_pressed",void 0,{location:"request-share-dialog"}),L.oR.success(i("share-request-dialog.share-success","Conversation shared!")),r(!1)},[r,c,i]),x=(0,b.useCallback)(()=>(0,s.jsxs)("div",{className:"space-y-4 py-2",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("div",{className:"h-1.5 w-1.5 rounded-full mt-2 flex-shrink-0 bg-primary"}),(0,s.jsx)("p",{className:"text-sm",children:i("share-request-dialog.viewers-can-only-see-current-messages","Viewers will be only able to see current messages at time of sharing.")})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("div",{className:"h-1.5 w-1.5 rounded-full mt-2 flex-shrink-0 bg-primary"}),(0,s.jsx)("p",{className:"text-sm",children:i("share-request-dialog.viewers-cannot-add-or-modify","Viewers will not be able to add or modify this conversation.")})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 p-3 border rounded-md",children:[(0,s.jsx)(p.hcu,{className:"h-4 w-4 text-secondary mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-secondary font-semibold",children:[i("share-request-dialog.note","Note"),":"]}),(0,s.jsx)("p",{className:"text-sm italic text-secondary",children:i("share-request-dialog.sharing-this-conversation-means-anybody-with-the-share-link-will-be-able-to-view-it","Sharing this conversation means anybody with the share link will be able to view it.")})]})]}),(0,s.jsxs)("div",{className:"w-full flex items-center gap-2 justify-end",children:[(0,s.jsx)(eJ.$n,{variant:"secondary",size:"md",shape:"rectangle",onClick:m,children:i("share-request-dialog.cancel","Cancel")}),t&&a&&(0,s.jsx)(u.w,{variant:"primary",size:"md",conversationId:t,responseId:a,iconProps:{size:18,strokeWidth:2},showLabel:!0,className:"rounded-xl",onClick:g})]})]}),[t,m,g,a,i]);return l?(0,s.jsx)(H._s,{open:n,onOpenChange:d,children:(0,s.jsxs)(H.zj,{className:"focus:outline-none bg-surface-l1 pt-1 p-6 h-[80dvh] mb-2",children:[(0,s.jsx)("div",{className:"text-lg font-semibold",children:i("share-request-dialog.title","Share request")}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:i("share-request-dialog.description","Someone would like access to a shared version of this conversation.")}),x()]})}):(0,s.jsx)(Z.lG,{open:n,onOpenChange:d,children:(0,s.jsxs)(Z.Cf,{className:"sm:max-w-md rounded-3xl border border-border-l1 p-6",children:[(0,s.jsxs)(Z.c7,{children:[(0,s.jsx)(Z.L3,{className:"text-lg font-semibold",children:i("share-request-dialog.title","Share request")}),(0,s.jsx)(Z.rr,{className:"text-sm text-muted-foreground",children:i("share-request-dialog.description","Someone would like access to a shared version of this conversation.")})]}),x()]})})}function t_(){let e=(0,P.h)(),t=(0,X.K)(),{signInWithReturnTo:a}=(0,er.o)(),{user:l}=(0,es.useSession)(),{handleVoiceModeEnter:c}=(0,eI.F)({location:"voice-chat-page"}),d=(0,o.aP)(O.A("optimisticConversationId")),u=(0,o.aP)(O.A("conversationId")),p=(0,o.aP)(O.A("lastMessageId")),m=(0,ei.w1)(O.A("fetchGetConversation")),g=(0,o.aP)(O.A("conversationMode")),x=(0,o.aP)(O.A("voiceConnectionStatus")),h=(0,o.aP)(O.A("exitVoiceMode")),v=(0,U.C$)(e=>e.userSettings.preferences.showActiveTabs),y=(0,R.j)(O.A("isOpen")),w=(0,eE.useSearchParams)(),I=(0,eE.useRouter)(),k=(0,eE.usePathname)(),{route:S,replace:C}=(0,eC.wK)();(0,b.useEffect)(()=>{var e;if("chat"===S.page&&S.temporary)return;let t="chat"===S.page&&null!=(e=S.conversationId)?e:void 0;o.aP.setState({conversationId:t})},[S]);let E=(0,o.aP)(O.A("setRequestShareDialogOpen"));(0,b.useEffect)(()=>{let e="SHARE_REQUESTED";if("true"===w.get(e)){E(!0);let t=new URLSearchParams(w.toString());t.delete(e),I.replace("".concat(k,"?").concat(t.toString()),{scroll:!1})}},[k,I,w,E]),tC(),function(){let e=(0,eE.useSearchParams)(),{t}=(0,j.Bd)("chat"),a=(0,eE.useRouter)(),s=(0,b.useRef)(!1),i=e.get(ek.il),n=(0,eS.M4)(i||"");(0,b.useEffect)(()=>{if(!s.current&&i){setTimeout(()=>L.oR.success(t("oauth.connection.success","Successfully connected {{provider}}!",{provider:n})),0),s.current=!0;let e=new URL(window.location.href);e.searchParams.delete(ek.il),a.replace("".concat(e.pathname).concat(e.search).concat(e.hash,"/"),{scroll:!1})}},[n,i,a,t])}(),function(e){let t=(0,ei.w1)(t=>e?t.byId[e]:void 0);(0,eN.r)(null==t?void 0:t.title)}(u);let{data:_,isLoading:A,error:M}=(0,eg.v)(u?m(u):void 0);(0,b.useEffect)(()=>{o.aP.getState().setChatPageLoaded(!0)},[]),(0,b.useEffect)(()=>{y&&"voice"===g&&h("navigation").catch(e=>{t("chat-page:exitVoiceMode",e)})},[y,g,h,t]),(0,b.useEffect)(()=>{if("voice"in S&&S.voice&&"voice"!==g&&(C({page:"main",voice:!1}),e.ENABLE_VOICE_MODE))if(l)c().catch(e=>(0,f.vV)("chat-page:handleVoiceModeEnter",e));else{(0,f.iu)("sign_in","voice-chat-page",{location:"voice-chat-page"}),a(void 0,void 0,!0);return}},[S,C,g,c,x,l,a,e]);let T=(0,b.useRef)(null);return(0,s.jsx)(r.t,{fallbackRender:()=>(0,s.jsx)(tA,{}),children:(0,s.jsxs)("main",{ref:T,className:(0,N.cn)("h-dvh flex-grow flex-shrink relative selection:bg-highlight w-0","@container isolate","print:h-full print:prose print:max-w-none"),children:[u&&p&&(0,s.jsx)(tP,{conversationId:u,lastMessageId:p}),(0,s.jsx)(n.a,{hidden:!0}),(0,s.jsx)(tS.g,{conversationId:u,containerRef:T,user:l}),(0,s.jsx)(eq.hx,{showTasks:!0,conversationIsLoading:A,conversation:_||void 0,isOptimisticConversation:!!d}),(0,s.jsx)(i.CommandMenu,{}),d&&"main"===S.page||u&&"chat"===S.page?(0,s.jsx)(tN,{optimisticConversationId:d,conversationIsLoading:A,conversationError:M,conversationId:u,conversation:_},"conversation-view"):(0,s.jsx)(tw,{}),(0,s.jsx)(ea,{}),e.ENABLE_CONVERSATION_TABS&&!e.USE_APP_SIDEBAR_V2&&v&&(0,s.jsx)(ej,{})]},"chat-page")})}function tA(){let{t:e}=(0,j.Bd)("chat");return(0,s.jsx)("div",{className:"w-full h-dvh flex justify-center items-center align-middle",children:(0,s.jsxs)("div",{className:"w-full max-w-lg text-center",children:[(0,s.jsx)(eC.N_,{route:{page:"main"},className:"mb-6 flex justify-center",children:(0,s.jsx)(l.r1,{height:20,width:60,className:"opacity-80 hover:opacity-100 fill-black dark:fill-white"})}),(0,s.jsx)("div",{children:e("There was an error","There was an error")}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(m.$n,{variant:"primary",size:"md",onClick:()=>{window.location.href="/"},children:e("Return to Home","Return to Home")})})]})})}},20143:(e,t,a)=>{a.d(t,{G5:()=>n,MF:()=>i,YK:()=>c,fL:()=>l,hu:()=>o,p8:()=>r});var s=a(6132);s.z.enum(["overview","financials"]),s.z.enum(["incomeStatements","balanceSheets","cashFlows"]);let i=Object.values(s.z.enum(["quarterly","annual"]).enum),n=Object.values(s.z.enum(["1D","5D","1M","6M","YTD","1Y","5Y"]).enum),r="stock_chart_ticker",l="stock_financials_ticker",o="stock_summary_ticker",c="stock_related_tickers"},30693:(e,t,a)=>{a.d(t,{F:()=>o});var s=a(79342),i=a(11750),n=a(88382),r=a(65146),l=a(75500);function o(){let e=(0,l.h)();return(0,n.useMemo)(()=>{var t,a;let s=Array.isArray(null==(a=e.EDIT_IMAGE_PRESETS)||null==(t=a.value)?void 0:t.presets)?e.EDIT_IMAGE_PRESETS.value.presets:[];return{editImagePresets:c.map(e=>({...e,label:e.label,presets:e.presets.map(e=>{var t,a;return{...e,prompt:null!=(a=null==(t=s.find(t=>t.presetId===e.presetId))?void 0:t.prompt)?a:""}})})).filter(e=>e.presets.some(e=>e.prompt)).map(e=>({...e,presets:e.presets.filter(e=>e.prompt)}))}},[e])}let c=[{category:"creative",icon:i.v9l,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.categories.creative",defaults:"Creative"}),presets:[{presetId:"water-color",icon:i.RSl,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.water-color",defaults:"Watercolor"}),previewUrl:"/image-editing-preset-previews/water-color.jpg"},{presetId:"15th-century",icon:i.lqP,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.15th-century",defaults:"15th Century"}),previewUrl:"/image-editing-preset-previews/15th-century.jpg"},{presetId:"graffiti",icon:i.OKP,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.graffiti",defaults:"Graffiti"}),previewUrl:"/image-editing-preset-previews/graffiti.jpg"},{presetId:"renaissance-painting",icon:i.esB,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.renaissance-painting",defaults:"Renaissance Painting"}),previewUrl:"/image-editing-preset-previews/renaissance-painting.jpg"},{presetId:"symbolist-painting",icon:i.kU3,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.symbolist-painting",defaults:"Symbolist Painting"}),previewUrl:"/image-editing-preset-previews/symbolist-painting.jpg"},{presetId:"expressionist-painting",icon:i.vMd,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.expressionist-painting",defaults:"Expressionist Painting"}),previewUrl:"/image-editing-preset-previews/expressionist-painting.jpg"},{presetId:"cubist-painting",icon:i.M6A,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.cubist-painting",defaults:"Cubist Painting"}),previewUrl:"/image-editing-preset-previews/cubist-painting.jpg"},{presetId:"ukiyo-e-painting",icon:i.GeJ,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.ukiyo-e-painting",defaults:"Ukiyo-e Painting"}),previewUrl:"/image-editing-preset-previews/ukiyo-e-painting.jpg"},{presetId:"bright-anime",icon:i.pnY,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.bright-anime",defaults:"Bright Anime"}),previewUrl:"/image-editing-preset-previews/bright-anime.jpg"},{presetId:"dark-anime",icon:i.AUI,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.dark-anime",defaults:"Dark Anime"}),previewUrl:"/image-editing-preset-previews/dark-anime.jpg"},{presetId:"cyberpunk",icon:i.Qxc,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.cyberpunk",defaults:"Cyberpunk"}),previewUrl:"/image-editing-preset-previews/cyberpunk.jpg"},{presetId:"retro-game",icon:i.Wud,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.retro-game",defaults:"Retro Game"}),previewUrl:"/image-editing-preset-previews/retro-game.jpg"}]},{category:"background",icon:i.dM2,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.categories.background",defaults:"Background"}),presets:[{presetId:"paris",icon:i.t6i,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.paris",defaults:"Paris"}),previewUrl:"/image-editing-preset-previews/paris.jpg"},{presetId:"london",icon:i.t6i,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.london",defaults:"London"}),previewUrl:"/image-editing-preset-previews/london.jpg"},{presetId:"tokyo",icon:i.t6i,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.tokyo",defaults:"Tokyo"}),previewUrl:"/image-editing-preset-previews/tokyo.jpg"},{presetId:"mars",icon:i.XQK,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.mars",defaults:"Mars"}),previewUrl:"/image-editing-preset-previews/mars.jpg"},{presetId:"tropical-paradise",icon:i.L71,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.tropical-paradise",defaults:"Tropical Paradise"}),previewUrl:"/image-editing-preset-previews/tropical-paradise.jpg"},{presetId:"cosmic-void",icon:i.sUz,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.cosmic-void",defaults:"Cosmic Void"}),previewUrl:"/image-editing-preset-previews/cosmic-void.jpg"},{presetId:"urban-rooftop",icon:i.t6i,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.urban-rooftop",defaults:"Urban Rooftop"}),previewUrl:"/image-editing-preset-previews/urban-rooftop.jpg"},{presetId:"enchanted-cave",icon:i.gDK,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.enchanted-cave",defaults:"Enchanted Cave"}),previewUrl:"/image-editing-preset-previews/enchanted-cave.jpg"},{presetId:"misty-forest",icon:i.YUH,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.misty-forest",defaults:"Misty Forest"}),previewUrl:"/image-editing-preset-previews/misty-forest.jpg"},{presetId:"retro-arcade",icon:i.ZNA,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.retro-arcade",defaults:"Retro Arcade"}),previewUrl:"/image-editing-preset-previews/retro-arcade.jpg"},{presetId:"space-station",icon:i.f36,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.space-station",defaults:"Space Station"}),previewUrl:"/image-editing-preset-previews/space-station.jpg"},{presetId:"desert-oasis",icon:i.L71,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.desert-oasis",defaults:"Desert Oasis"}),previewUrl:"/image-editing-preset-previews/desert-oasis.jpg"},{presetId:"volcano-lair",icon:i.Q5j,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.volcano-lair",defaults:"Volcano Lair"}),previewUrl:"/image-editing-preset-previews/volcano-lair.jpg"},{presetId:"post-apocalypse",icon:i.A1H,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.post-apocalypse",defaults:"Post-Apocalypse"}),previewUrl:"/image-editing-preset-previews/post-apocalypse.jpg"}]},{category:"subject",icon:i.BDI,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.categories.subject",defaults:"Subject"}),presets:[{presetId:"stylish-hat",icon:i.fbd,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.stylish-hat",defaults:"Stylish Hat"}),previewUrl:"/image-editing-preset-previews/stylish-hat.jpg"},{presetId:"mustache",icon:i.Hx3,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.mustache",defaults:"Mustache"}),previewUrl:"/image-editing-preset-previews/mustache.jpg"},{presetId:"superhero-costume",icon:i.KqI,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.superhero-costume",defaults:"Superhero Costume"}),previewUrl:"/image-editing-preset-previews/superhero-costume.jpg"},{presetId:"golden-glow",icon:i.S7m,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.golden-glow",defaults:"Golden Glow"}),previewUrl:"/image-editing-preset-previews/golden-glow.jpg"},{presetId:"mecha-warrior",icon:i.cC5,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.mecha-warrior",defaults:"Mecha Warrior"}),previewUrl:"/image-editing-preset-previews/mecha-warrior.jpg"},{presetId:"sunglasses-jacket",icon:i.ljW,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.sunglasses-jacket",defaults:"Sunglasses & Jacket"}),previewUrl:"/image-editing-preset-previews/sunglasses-jacket.jpg"},{presetId:"medieval-armor",icon:i.ekZ,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.medieval-armor",defaults:"Medieval Armor"}),previewUrl:"/image-editing-preset-previews/medieval-armor.jpg"},{presetId:"time-traveler",icon:i.zD7,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.time-traveler",defaults:"Time Traveler"}),previewUrl:"/image-editing-preset-previews/time-traveler.jpg"},{presetId:"hologram-effect",icon:i.srL,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.hologram-effect",defaults:"Hologram Effect"}),previewUrl:"/image-editing-preset-previews/hologram-effect.jpg"},{presetId:"dragon-rider",icon:i.Q5j,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.dragon-rider",defaults:"Dragon Rider"}),previewUrl:"/image-editing-preset-previews/dragon-rider.jpg"},{presetId:"remove-people",icon:i.Kr6,label:(0,s.jsx)(r.x6,{ns:"base",i18nKey:"edit-image-presets.presets.remove-people",defaults:"Remove People"}),previewUrl:"/image-editing-preset-previews/remove-people.jpg"}]}]},38362:(e,t,a)=>{a.d(t,{g:()=>h});var s=a(79342),i=a(57614),n=a(52553),r=a(23232),l=a(98100),o=a(92437),c=a(70888),d=a(11750),u=a(84969),p=a(33846),m=a(74995),g=a(65146),x=a(38614);function h(e){let{conversationId:t,containerRef:a,user:h,imageAttachmentsOnly:f=!1}=e,{t:v}=(0,g.Bd)("chat"),y=function(e,t,a){let s=(0,x.aP)(m.A("activeModelId")),{modelById:d}=(0,l.GB)(),u=null==d?void 0:d[s],{isAttachDisabled:p}=(0,l.QG)(u),{attachFiles:g}=(0,n.S)(),h=(0,r._)(),{user:f}=(0,i.useSession)(),v=(0,c.x)(m.A("listByConversationId"))[e||"no_conversation_id"]||[];return"hover"===(0,o.t)({onDrop:e=>{f&&(g(e),e.forEach(e=>{h("upload_file",e.name,{location:"file-drop",mimeType:e.type})}))},canDrop:e=>{var t;return!p&&!!e.files.length&&(!a||!(e.files.length>1)&&!!(null==(t=e.files[0])?void 0:t.type.startsWith("image/")))&&(!v.length||!v.find(t=>{var a;return t.file.name===(null==(a=e.files[0])?void 0:a.name)}))},ref:t},[v,f,p,g])}(t,a,f),b=(0,x.aP)(m.A("activeModelId")),{modelById:j}=(0,l.GB)(),w=null==j?void 0:j[b],{isAttachDisabled:I,isThinkSelected:k,isDeepsearchSelected:N}=(0,l.QG)(w);return(0,s.jsx)(u.N,{children:y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-overlay z-50"},"drop-backdrop"),(0,s.jsx)(p.P.div,{initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:20},className:"absolute inset-0 z-50 flex items-center justify-center p-6 pointer-events-none",children:h?I?(0,s.jsxs)("div",{className:"rounded-2xl w-full max-w-xl bg-background flex flex-col items-center py-12 border-[1px] border-dashed border-input-border",children:[(0,s.jsx)("div",{children:(0,s.jsx)(d.lW3,{size:32,className:"text-red-400"})}),(0,s.jsx)("h2",{className:"mt-4 text-lg font-medium text-primary",children:v("Attachments are disabled","Attachments are disabled")}),(0,s.jsxs)("p",{className:"text-secondary",children:[v("Attachments are disabled for","Attachments are disabled for")," ",(0,s.jsx)("span",{className:"font-semibold",children:k?"Think":N?"DeepSearch":void 0})]})]}):(0,s.jsxs)("div",{className:"rounded-2xl w-full max-w-xl bg-background flex flex-col items-center py-12 border-[1px] border-dashed border-input-border",children:[(0,s.jsx)("div",{children:(0,s.jsx)(d.XGR,{size:32,className:"text-secondary"})}),(0,s.jsx)("h2",{className:"mt-4 text-lg font-medium text-primary",children:v("Drop your files here","Drop your files here")}),(0,s.jsx)("p",{className:"text-secondary",children:v("Drop your files here to add them to your conversation","Drop your files here to add them to your conversation")})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center w-full max-w-xl py-12 border-4 border-red-400 border-dashed rounded-2xl bg-background",children:[(0,s.jsx)("div",{children:(0,s.jsx)(d.XGR,{size:32,className:"text-secondary"})}),(0,s.jsx)("h2",{className:"mt-4 mb-2 text-lg font-medium text-red-400",children:v("Sign in to attach files!","Sign in to attach files!")}),(0,s.jsx)("p",{className:"text-secondary",children:v("You must be signed in to attach files to your conversation","You must be signed in to attach files to your conversation")})]})},"drop-modal")]})})}},40016:(e,t,a)=>{a.d(t,{q:()=>m});var s=a(79342),i=a(38614),n=a(11750),r=a(61312),l=a(1189),o=a(33846),c=a(74995),d=a(88382),u=a(65146),p=a(63174);let m=e=>{let{className:t,hasImage:a,inputValue:m,isStreaming:g,onInputValueChange:x,onSend:h,onAbort:f}=e,{t:v}=(0,u.Bd)("base"),y=(0,i.aP)(c.A("lastMessageId")),b=(0,i.aP)(c.A("streamedMessageId")),j=(0,l.A3)(c.A("byId")),w=(0,d.useRef)(null),I=(0,d.useRef)(null),[k,N]=(0,d.useState)(!1),S=(0,d.useMemo)(()=>g||!a,[g,a]),C=(0,d.useMemo)(()=>!k&&!g&&a&&!!m.trim(),[k,a,m,g]),E=(0,d.useCallback)(async e=>{var t;e.preventDefault(),!S&&m.trim()&&(N(!0),await (null==(t=h(m))?void 0:t.finally(()=>{var e;null==(e=I.current)||e.focus(),N(!1)})))},[h,S,m]),P=(0,d.useMemo)(()=>{let e=b?j[b]:void 0;if((null==e?void 0:e.parentResponseId)===y)return e},[b,j,y]),_=(0,d.useMemo)(()=>{if(g)return(null==P?void 0:P.state)||"closed"},[g,P]),A=(0,d.useCallback)(e=>{if(e.stopPropagation(),"Enter"===e.key&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey&&!e.nativeEvent.isComposing){var t;e.preventDefault(),null==(t=w.current)||t.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},[]);return(0,s.jsxs)("form",{className:(0,r.cn)("w-full rounded-[32px] p-3 bg-input-background shadow shadow-input-border/10 flex gap-2 pl-5 items-end ring-1 ring-input-border ring-inset",t),onSubmit:E,ref:w,children:[(0,s.jsx)(p.A,{ref:I,className:(0,r.cn)("w-full @[480px]/input:px-3 bg-transparent focus:outline-none text-primary align-bottom resize-none pb-1.5",g&&"animate-pulse"),onChange:e=>x(e.target.value),value:m,placeholder:a?g?v("Editing image","Editing image"):v("Describe your edits","Describe your edits"):v("Upload an image to begin","Upload an image to begin"),minRows:1,onKeyDown:A,autoFocus:!0,disabled:S,name:"query",maxRows:5}),(0,s.jsx)("div",{className:(0,r.cn)("ml-auto flex flex-row items-end gap-1"),children:g&&("streaming"===_||"reconnecting"===_)?(0,s.jsx)(o.P.button,{whileTap:{scale:.95},initial:{scale:.95,opacity:1},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:.5,transition:{duration:.2}},className:(0,r.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),onClick:e=>{e.preventDefault(),f().catch(console.error)},children:(0,s.jsx)("div",{className:(0,r.cn)("h-9","aspect-square flex flex-col items-center justify-center rounded-full","rounded-full ring-1 ring-inset","bg-primary text-background ring-button-outline-border"),children:(0,s.jsx)(n.M6A,{size:20})})}):(0,s.jsx)(o.P.button,{initial:{opacity:.5},animate:{opacity:1,transition:{duration:.1}},whileHover:a?{scale:1.1}:void 0,whileTap:a?{scale:.95}:void 0,className:(0,r.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),type:"submit","aria-label":v("Submit","Submit"),disabled:!C,children:(0,s.jsx)("div",{className:(0,r.cn)("h-9 relative","aspect-square flex flex-col items-center justify-center","rounded-full ring-1 ring-inset duration-100","before:absolute before:inset-0 before:rounded-full before:bg-primary before:ring-0 before:transition-all duration-500",C?"bg-primary text-background ring-transparent before: before:[clip-path:circle(50%_at_50%_50%)]":"bg-button-secondary text-secondary before:[clip-path:circle(0%_at_50%_50%)] ring-0"),children:(0,s.jsx)(n.Kpk,{size:20,className:"relative"})})})})]})}},76393:(e,t,a)=>{a.d(t,{p:()=>n});var s=a(79342),i=a(61312);let n=e=>{let{value:t,formatter:a,prefix:n,suffix:r,className:l}=e,o=t>0?"+":t<0?"-":"",c=Math.abs(t),d=a?a(c):c;return(0,s.jsxs)("span",{className:(0,i.cn)(t>0?"text-teal-300":t<0?"text-red-300":"text-muted-foreground",l),children:[n,!!o&&o,d,r]})}},93220:(e,t,a)=>{a.d(t,{$:()=>l});var s=a(79342),i=a(61312),n=a(11750),r=a(33846);let l=e=>{let{className:t}=e;return(0,s.jsx)(r.P.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{ease:"easeInOut"},className:(0,i.cn)("h-full w-full flex items-center justify-center animate-pulse-lg",t),children:(0,s.jsx)(n.xfq,{size:60,strokeWidth:1.3,className:"opacity-30 rotate-[-10deg]"})},"loader")}}}]);